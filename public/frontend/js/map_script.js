var map;
var markers = [];
var lastinfowindow;
var locIndex;
var values;
var getFilter;
var cityFilter;
var airportFilter;
var sideH;

//Credit: MDN
if ( !Array.prototype.forEach ) {
    Array.prototype.forEach = function(fn, scope) {
        for(var i = 0, len = this.length; i < len; ++i) {
            fn.call(scope, this[i], i, this);
        }
    }
}

/*
 This is the data as a JS array. It could be generated by CF of course. This
 drives the map and the div on the side.
 */

var data = [
    {


        city:"Riyadh",
        name:'<b>King Khalid Airport </b>',
        address:'King Khaled International Airport - Hall 3',
        //airport:'',
        phone:'<span>Tel:011 2203166</span><span>Fax:011  2203177</span><span>Mobile:0593339701</span>',
        worktiming:'Working Time: 24 Hours',
        locating:'Map: <a class="underline">View Location</a>',
        type:'Airport',
        lat:24.941739,
        lng:46.711239              	  },
    {


        city:"Riyadh",
        name:'<b>Main - Al Worood Dist.</b>',
        address:' Al worood Dist - The intersection of King Abdulaziz with Sheikh Abdullah Ankary ST',
        //airport:'',
        phone:'<span>Tel:011 2052515</span><span>Fax:011 2052515 / 239</span><span>Mobile:0593414670</span>',
        worktiming:'Working Time: </br>Saturday - Thuesday: 08:00 - 00:00<br/>Friday: 16:00 - 00:00',
        locating:'Map: <a class="underline">View Location</a>',
        type:'Head Office',
        lat:24.727711,
        lng:46.689208              	  },
    {


        city:"Jeddah",
        name:'<b>King A.Aziz airport</b>',
        address:'King Abdulaziz International Airport',
        //airport:'',
        phone:'<span>Tel:012 6856251</span><span>Fax:012 6850977</span><span>Mobile:0593330101 - 0593330100</span>',
        worktiming:'Working Time: 24 Hours',
        locating:'Map: <a class="underline">View Location</a>',
        type:'Airport',
        lat:21.667722,
        lng:39.149194             	  },
    {


        city:"Jeddah",
        name:'<b>Main - MADINA ROAD</b>',
        address:'Madina Road - Albawadi Dist. beside Saudi Holandi Bank',
        //airport:'',
        phone:'<span>Tel:012 6835151</span> <span>Fax:012 6823593</span><span>Mobile:0593330054</span>',
        worktiming:'Working Time: </br>Saturday - Thursday: 08:00 - 00:00<br/>Friday: 15:00 - 23:00',
        locating:'Map: <a class="underline">View Location</a>',
        type:'Head Office',
        lat:21.565522,
        lng:39.169672              	  },

    {


        city:"Makkah",
        name:'<b>KAKIA</b>',
        address:'Al Sbhani - Al laith General road',
        //airport:'',
        phone:'<span>Tel:012 5412796</span><span>Fax:</span><span>Mobile:0593330107</span>',
        worktiming:'Working Time: </br>Saturday - Thursday: 09:00 - 12:00 / 17:00 - 22:00<br/>Friday: Closed',
        locating:'Map: <a class="underline">View Location</a>',
        type:'Branch',
        lat:21.360297,
        lng:39.789467             	  },
    {


        city:"Jeddah",
        name:'<b>40TH STREET</b>',
        address:'40th Street beside Al-inmaa Bank',
        //airport:'',
        phone:'<span>Tel:012 6938486</span><span>Fax:</span><span>Mobile:0593330062</span>',
        worktiming:'Working Time: </br>Saturday - Thursday: 09:00 - 23:00<br/>Friday: 17:00 - 22:00',
        locating:'Map: <a class="underline">View Location</a>',
        type:'Branch',
        lat:21.579333,
        lng:39.208889              	  },
    {


        city:"Jeddah",
        name:'<b>PALESTINE</b>',
        address:'Falasteen ST. with the Intersection of 40th ST. - Shams gas station',
        //airport:'',
        phone:'<span>Tel:012 6711849</span><span>Fax:</span><span>Mobile:0593330057</span>',
        worktiming:'Working Time: </br>Saturday - Thursday: 09:00 - 23:00<br/>Friday: 17:00 - 22:00',
        locating:'Map: <a class="underline">View Location</a>',
        type:'Branch',
        lat:21.536334,
        lng:39.217629              	  },
    {


        city:"Jeddah",
        name:'<b>Andalus</b>',
        address:'Alandalus ST. after Al-suhaily center',
        //airport:'',
        phone:'<span>Tel:012 6103744</span><span>Fax:012 6103944</span><span>Mobile:0593330059</span>',
        worktiming:'Working Time: </br>Saturday - Thursday: 09:00 - 12:00 / 17:00 - 23:00<br/>Friday: 17:00 - 22:00',
        locating:'Map: <a class="underline">View Location</a>',
        type:'Branch',
        lat:21.517062,
        lng:39.166619              	  },
    {


        city:"Jeddah",
        name:'<b>BAGDADIA</b>',
        address:'Madina Road opposite the Business Center',
        //airport:'',
        phone:'<span>Tel:012 6442821</span><span>Fax:</span><span>Mobile:0593330056</span>',
        worktiming:'Working Time:  </br>Saturday - Thursday: 09:00 - 12:00 / 17:00 - 23:00<br/>Friday: Closed',
        locating:'Map: <a class="underline">View Location</a>',
        type:'Branch',
        lat:21.502806,
        lng:39.183083            	  },
    {


        city:"Jeddah",
        name:'<b>FALAK SQUARE</b>',
        address:'Sari ST. towards madina road - beside alfalak roundabout',
        //airport:'',
        phone:'<span>Tel:0593330096</span><span>Fax:</span>',
        worktiming:'Working Time: </br>Saturday - Thursday: 09:00 - 12:00 / 17:00 - 23:00<br/>Friday: Closed',
        locating:'Map: <a class="underline">View Location</a>',
        type:'Branch',
        lat:21.584055,
        lng:39.174722              	  },
    {


        city:"Jeddah",
        name:'<b>ALHARAMAIN</b>',
        address:'Alharamain ST. to the south - near to Alsamir bridge - beside Rokon Joha REST.',
        //airport:'',
        phone:'<span>Tel:012 6776301</span><span>Fax:012 6776235</span><span>Mobile:0593330063</span>',
        worktiming:'Working Time: </br>Saturday - Thursday: 09:00 - 23:00<br/>Friday: 17:00 - 22:00',
        locating:'Map: <a class="underline">View Location</a>',
        type:'Branch',
        lat:21.579306,
        lng:39.228472              	  },
    {


        city:"Jeddah",
        name:'<b>MADINA ROAD</b>',
        address:'Madina road - alrawda gas station - before kobri almoraba',
        //airport:'',
        phone:'<span>Tel:012 6610869</span><span>Fax:012 2560532</span>',
        worktiming:'Working Time: </br>Saturday - Thursday: 09:00 - 12:00 / 17:00 - 23:00<br/>Friday: Closed',
        locating:'Map: <a class="underline">View Location</a>',
        type:'Branch',
        lat:21.565522,
        lng:39.169672              	  },
    {


        city:"Jeddah",
        name:'<b>SARI STREET</b>',
        address:'Sari ST. towards madina road - opposite to Burger King',
        //airport:'',
        phone:'<span>Tel:012 2560532</span><span>Fax:012 2560503</span><span>Mobile:0593330082</span>',
        worktiming:'Working Time: </br>Saturday - Thursday: 09:00 - 12:00 / 17:00 - 23:00<br/>Friday: Closed',
        locating:'Map: <a class="underline">View Location</a>',
        type:'Branch',
        lat:21.577555,
        lng:39.154222              	  },
    {


        city:"Jeddah",
        name:'<b>OLD AIRPORT</b>',
        address:'Alfaiha Dist. Beside Mobily Dist.',
        //airport:'',
        phone:'<span>Tel:012 6319138</span><span>Fax:012 6319189</span><span>Mobile:0593330064</span>',
        worktiming:'Working Time: </br>Saturday - Thursday: 09:00 - 23:00<br/>Friday: 17:00 - 22:00',
        locating:'Map: <a class="underline">View Location</a>',
        type:'Branch',
        lat:21.494528,
        lng:39.218917             	  },
    {


        city:"Jeddah",
        name:'<b>Prince MAJED ROAD</b>',
        address:'Alrabwah Dist. - intersection of Hira ST. with prince majid ST.',
        //airport:'',
        phone:'<span>Tel:012 6123710</span><span>Fax:012 6123711</span><span>Mobile:0593330083</span>',
        worktiming:'Working Time: </br>Saturday - Thursday: 09:00 - 23:00<br/>Friday: 17:00 - 22:00',
        locating:'Map: <a class="underline">View Location</a>',
        type:'Branch',
        lat:21.617228,
        lng:39.186248              	  },
    {


        city:"Jeddah",
        name:'<b>Prince Sultan Street</b>',
        address:'Sultan ST. to the north - before the altareekh roundabout',
        //airport:'',
        phone:'<span>Tel:012 6921843</span><span>Fax:</span><span>Mobile:0593330061</span>',
        worktiming:'Working Time: </br>Saturday - Thursday: 09:00 - 12:00 / 17:00 - 23:00<br/>Friday: Closed',
        locating:'Map: <a class="underline">View Location</a>',
        type:'Branch',
        lat:21.609361,
        lng:39.141806              	  },


    {


        city:"Jeddah",
        name:'<b>TOYOTA PRINCE SULTAN</b>',
        address:'Prince sultan ST. to the north - after iceland center',
        //airport:'',
        phone:'<span>Tel:0593330076</span><span>Fax:</span><span>Phone:593330076</span>',
        worktiming:'Working Time: </br>Saturday - Thursday: 09:00 - 12:00 / 17:00 - 23:00<br/>Friday: Closed',
        locating:'Map: <a class="underline">View Location</a>',
        type:'Branch',
        lat:21.602076,
        lng:39.143461              	  },

    {


        city:"Jeddah",
        name:'<b>Main - TOYOTA  MADINA ROAD</b>',
        address:'Toyota center - madina road to the north - opposite of le meredien hotel',
        //airport:'',
        phone:'<span>Tel:0593330081</span><span>Fax:</span><span>Mobile:0593330081</span>',
        worktiming:'Working Time: </br>Saturday - Thursday: 09:00 - 12:00 / 17:00 - 23:00<br/>Friday: Closed',
        locating:'Map: <a class="underline">View Location</a>',
        type:'Branch',
        lat:21.567044,
        lng:39.169586              	  },
    {


        city:"Jeddah",
        name:'<b>AL NASEEM</b>',
        address:'Alnaseem Dist. Alsuhaimi gas station',
        //airport:'',
        phone:'<span>Tel:012 2521058</span><span>Fax:</span><span>Mobile:0593414650</span>',
        worktiming:'Working Time: </br>Saturday - Thursday: 09:00 - 12:00 / 17:00 - 23:00<br/>Friday: Closed',
        locating:'Map: <a class="underline">View Location</a>',
        type:'Branch',
        lat:21.511861,
        lng:39.226139             	  },

    {


        city:"Jeddah",
        name:'<b>QURAISH</b>',
        address:'Saqir Quraish ST. opposite to Casa blanca Hotel',
        //airport:'',
        phone:'<span>Tel:</span><span>Fax:</span><span>Mobile:0582328961</span>',
        worktiming:'Working Time:',
        locating:'Map: <a class="underline">View Location</a>',
        type:'Branch',
        lat:21.584828,
        lng:39.159366             	  },


    {


        city:"Riyadh",
        name:'<b>Andalus</b>',
        address:'Anduls Dist - Al Rawda 2 - Om Almuameneen Hafsa Bent Omer',
        //airport:'',
        phone:'<span>Tel:011 2332767</span><span>Fax:</span><span>Mobile:0593339714</span>',
        worktiming:'Working Time: </br>Saturday - Thursday: 08:30 - 12:00 / 16:00 - 22:00<br/>Friday: 16:00 - 22:00',
        locating:'Map: <a class="underline">View Location</a>',
        type:'Branch',
        lat:24.743214,
        lng:46.790664              	  },
    {


        city:"Riyadh",
        name:'<b>Azizia</b>',
        address:'South of Riyadh - Al aziziah Dist - al shabab ST',
        //airport:'',
        phone:'<span>Tel:011 2138075</span><span>Fax:</span><span>Mobile:0599047944</span>',
        worktiming:'Working Time: </br>Saturday - Thursday: 08:30 - 12:00 / 16:00 - 22:00<br/>Friday: 16:00 - 22:00',
        locating:'Map: <a class="underline">View Location</a>',
        type:'Branch',
        lat:24.583839,
        lng:46.763589              	  },
    {


        city:"Riyadh",
        name:'<b>Badeiah</b>',
        address:'Western Ring - Exit 27 - Service road',
        //airport:'',
        phone:'<span>Tel:0599028868</span><span>Fax:</span><span>Mobile:0599028868</span>',
        worktiming:'Working Time: </br>Saturday - Thursday: 08:30 - 12:00 / 16:00 - 22:00<br/>Friday: 16:00 - 22:00',
        locating:'Map: <a class="underline">View Location</a>',
        type:'Branch',
        lat:24.569950,
        lng:46.617344              	  },

    {


        city:"Riyadh",
        name:'<b>Malaz</b>',
        address:'60s ST in Malaz - beside Al-Aqaryah - infront of Security Forces Hospital',
        //airport:'',
        phone:'<span>Tel:011 4729921</span><span>Fax:</span><span>Mobile:0593339705</span>',
        worktiming:'Working Time: </br>Saturday - Thursday: 08:30 - 12:00 / 16:00 - 22:30<br/>Friday: 16:00 - 22:00',
        locating:'Map: <a class="underline">View Location</a>',
        type:'Branch',
        lat:24.683228,
        lng:46.725744              	  },
    {


        city:"Riyadh",
        name:'<b>Murouj</b>',
        address:'King abdul aziz ST- Versus Bandah Al maseef',
        //airport:'',
        phone:'<span>Tel:011 2251506</span><span>Mobile:0593339708</span>',
        worktiming:'Working Time: </br>Saturday - Thursday: 08:30 - 12:00 / 16:00 - 22:30<br/>Friday: 16:00 - 22:00',
        locating:'Map: <a class="underline">View Location</a>',
        type:'Branch',
        lat:24.759400,
        lng:46.673350              	  },
    {


        city:"Riyadh",
        name:'<b>Olaya Center</b>',
        address:' Genaral Alolia road- Car Rental Complex  Mossa Building',
        //airport:'',
        phone:'<span>Tel:011 4651669</span><span>Fax:</span><span>Mobile:0593339711</span>',
        worktiming:'Working Time: </br>Saturday - Thursday: 08:30 - 12:00 / 16:00 - 22:00<br/>Friday: 16:00 - 22:00',
        locating:'Map: <a class="underline">View Location</a>',
        type:'Branch',
        lat:24.687314,
        lng:46.688611              	  },

    {


        city:"Riyadh",
        name:'<b>Rawdah</b>',
        address:' Al rawdah Dist - Abadh Bin Alsamat ST',
        //airport:'',
        phone:'<span>Tel:011 4454199</span><span>Fax:</span><span>Mobile:0593339709</span>',
        worktiming:'Working Time: </br>Saturday - Thursday: 08:30 - 12:00 / 16:00 - 22:30<br/>Friday: 16:00 - 22:00',
        locating:'Map: <a class="underline">View Location</a>',
        type:'Branch',
        lat:24.733883,
        lng:46.768933              	  },
    {


        city:"Riyadh",
        name:'<b>Sulimania</b>',
        address:' rental Complex - vertigo Old Airport',
        //airport:'',
        phone:'<span>Tel:</span><span>Fax:</span><span>Mobile:0593339703</span>',
        worktiming:'Working Time:',
        locating:'Map: <a class="underline">View Location</a>',
        type:'Branch',
        lat:24.704819,
        lng:46.716958              	  },
    {


        city:"Riyadh",
        name:'<b>Al Aqeeq</b>',
        address:' Eshbilliya Dist - Extension Exit 9 - East direction - Beside Yarmouk Dist',
        //airport:'',
        phone:'<span>Tel:</span><span>Fax:</span><span>Mobile:0593339704</span>',
        worktiming:'Working Time:',
        locating:'Map: <a class="underline">View Location</a>',
        type:'Branch',
        lat:24.790553,
        lng:46.631783              	  },



    {


        city:"Makkah",
        name:'<b>KHALIDIA</b>',
        address:'Al Khaledia 1- Beside Al Rajhi Bank',
        //airport:'',
        phone:'<span>Tel:012 5403933</span><span>Fax:</span><span>Mobile:0593330104</span>',
        worktiming:'Working Time: </br>Saturday - Thursday: 09:00 - 12:00 / 17:00 - 22:00<br/>Friday: Closed',
        locating:'Map: <a class="underline">View Location</a>',
        type:'Branch',
        lat:21.403167,
        lng:39.793139             	  },
    {


        city:"Makkah",
        name:'<b>OMRA</b>',
        address:' Alshoohda - Beside Saudi Airlines',
        //airport:'',
        phone:'<span>Tel:012 5607073</span><span>Fax:</span><span>Mobile:0593330105</span>',
        worktiming:'Working Time: </br>Saturday - Thursday: 09:00 - 12:00 / 17:00 - 22:00<br/>Friday: Closed',
        locating:'Map: <a class="underline">View Location</a>',
        type:'Branch',
        lat:21.455944,
        lng:39.807556             	  },

    {


        city:"Makkah",
        name:'<b>AL NUZHA</b>',
        address:'Al nuzha General ST. Beside security patrols',
        //airport:'',
        phone:'<span>Tel:012 5492450</span><span>Fax:</span><span>Mobile:0593330102</span>',
        worktiming:'Working Time: </br>Saturday - Thursday: 09:00 - 12:00 / 17:00 - 22:00<br/>Friday: 17:00 - 22:00',
        locating:'Map: <a class="underline">View Location</a>',
        type:'Branch',
        lat:21.437306,
        lng:39.794194              	  },
    {


        city:"Madinah",
        name:'<b>AZIZIA</b>',
        address:'aljamiaat road - infront of the stiduim',
        //airport:'',
        phone:'<span>Tel:014 8463585</span><span>Fax:</span><span>Mobile:0593339715</span>',
        worktiming:'Working Time: </br>Saturday - Thursday: 09:00 - 12:00 / 17:00 - 22:00<br/>Friday: 17:00 - 22:00',
        locating:'Map: <a class="underline">View Location</a>',
        type:'Branch',
        lat:24.465338,
        lng:39.547714              	  },


    {


        city:"Madinah",
        name:'<b>HIZAM</b>',
        address:'Heezam road - Building arrivals formerly',
        //airport:'',
        phone:'<span>Tel:014 8480586</span><span>Fax:</span><span>Mobile:0593339716</span>',
        worktiming:'Working Time: </br>Saturday - Thursday: 09:00 - 12:00 / 17:00 - 22:00<br/>Friday: Closed',
        locating:'Map: <a class="underline">View Location</a>',
        type:'Branch',
        lat:24.456637,
        lng:39.642185              	  },

    {


        city:"Taif",
        name:'<b>Abu-Baker</b>',
        address:'Shobra Dist - Abu Bakr ST',
        //airport:'',
        phone:'<span>Tel:012 7361072</span><span>Fax:012 7346401</span><span>Mobile:0593330108</span>',
        worktiming:'Working Time: </br>Saturday - Thursday: 09:00 - 13:30 / 17:00 - 22:00<br/>Friday: 17:00 - 22:00',
        locating:'Map: <a class="underline">View Location</a>',
        type:'Branch',
        lat:21.280472,
        lng:40.414189              	  },
    {


        city:"Taif",
        name:'<b>Wadi Wajj</b>',
        address:' Riyadh road - maintenance bridge',
        //airport:'',
        phone:'<span>Tel:012 7345878</span><span>Fax:</span><span>Mobile:0593330118</span>',
        worktiming:'Working Time: </br>Saturday - Thursday: 09:00 - 12:00 / 17:00 - 22:00<br/>Friday: Closed',
        locating:'Map: <a class="underline">View Location</a>',
        type:'Branch',
        lat:21.317882,
        lng:40.433142              	  },
    {


        city:"Taif",
        name:'<b>Shahar</b>',
        address:'Alshahar General ST.',
        //airport:'',
        phone:'<span>Tel:012 7486470</span><span>Fax:012 7486475</span><span>Mobile:0593330117</span>',
        worktiming:'Working Time: </br>Saturday - Thursday: 09:00 - 12:00 / 17:00 - 22:00<br/>Friday: 17:00 - 22:00',
        locating:'Map: <a class="underline">View Location</a>',
        type:'Branch',
        lat:21.253939,
        lng:40.410193              	  },
    {


        city:"Yanbu",
        name:'<b>Downtown</b>',
        address:'Jeddah road',
        //airport:'',
        phone:'<span>Tel:014 3911284</span><span>Fax:</span><span>Mobile:0593330987</span>',
        worktiming:'Working Time: </br>Saturday - Thursday: 09:00 - 12:00 / 17:00 - 22:00<br/>Friday: Closed',
        locating:'Map: <a class="underline">View Location</a>',
        type:'Branch',
        lat:24.092388,
        lng:38.090286              	  },

    {


        city:"Yanbu",
        name:'<b>Royal Commission</b>',
        address:'Royal Commission - Al nuwah',
        //airport:'',
        phone:'<span>Tel:014 3210078</span><span>Fax:04 3961993</span><span>Mobile:0593330986</span>',
        worktiming:'Working Time: </br>Saturday - Thursday: 09:00 - 12:00 / 17:00 - 22:00<br/>Friday: 17:00 - 22:00',
        locating:'Map: <a class="underline">View Location</a>',
        type:'Branch',
        lat:24.013226,
        lng:38.190193              	  },

    {


        city:"Abha",
        name:'<b>Main Road</b>',
        address:'Khames Abha road Beside Hospital Dr.Ghassan Najeeb Feraoon',
        //airport:'',
        phone:'<span>Tel:172267894 - 0599352988</span><span>Fax:</span><span>Mobile:0599352988</span>',
        worktiming:'Working Time: </br>Saturday - Thursday: 09:00 - 12:00 / 17:00 - 22:00<br/>Friday: Closed',
        locating:'Map: <a class="underline">View Location</a>',
        type:'Branch',
        lat:18.299472,
        lng:42.688889              	  },
    {


        city:"Abha",
        name:'<b>Airport</b>',
        address:'Alairport ST. after Al-suhaily center',
        //airport:'',
        phone:'<span>Tel:0593414685</span><span>Fax:</span><span>Mobile:0593339701- 0593339702</span>',
        worktiming:'Working Time: 24 Hours',
        locating:'Map: <a class="underline">View Location</a>',
        type:'Airport',
        lat:18.234472,
        lng:42.657639              	  },
    {


        city:"Dammam",
        name:'<b>1st Street</b>',
        address:'1st ST Cornich road',
        //airport:'',
        phone:'<span>Tel:013 8322666</span><span>Fax:013-8338897</span><span>Mobile:0593331821</span>',
        worktiming:'Working Time: </br>Saturday - Thursday: 08:00 - 12:00 / 16:00 - 22:00<br/>Friday: 16:00 - 22:00',
        locating:'Map: <a class="underline">View Location</a>',
        type:'Branch',
        lat:26.445569,
        lng:50.118169              	  },
    {


        city:"Dammam",
        name:'<b>18th Street</b>',
        address:'18 ST Corniche - Al Sadafah roundabout',
        //airport:'',
        phone:'<span>Tel:013 8092866</span><span>Fax:013-8093515</span><span>Mobile:0593331823</span>',
        worktiming:'Working Time: </br>Saturday - Thursday: 08:00 - 12:00 / 16:00 - 22:00<br/>Friday: 16:00 - 22:00',
        locating:'Map: <a class="underline">View Location</a>',
        type:'Branch',
        lat:26.455886,
        lng:50.096392              	  },
    {


        city:"Dammam",
        name:'<b>42nd Street</b>',
        address:'42 ST Beside Girls College',
        //airport:'',
        phone:'<span>Tel:013 8412555</span><span>Fax:013-8468066</span><span>Mobile:0593331820</span>',
        worktiming:'Working Time: </br>Saturday - Thursday: 08:00 - 12:00 / 16:00 - 22:00<br/>Friday: 16:00 - 22:00',
        locating:'Map: <a class="underline">View Location</a>',
        type:'Branch',
        lat:26.411756,
        lng:50.079794              	  },
    {


        city:"Dammam",
        name:'<b>PRINCE Naief</b>',
        address:'scheme 71 - Beside Harfi',
        //airport:'',
        phone:'<span>Tel:013 8227618</span><span>Fax:</span><span>Mobile:0593414623</span>',
        worktiming:'Working Time: </br>Saturday - Thursday: 08:00 - 12:00 / 16:00 - 22:00<br/>Friday: 16:00 - 22:00',
        locating:'Map: <a class="underline">View Location</a>',
        type:'Branch',
        lat:26.413889,
        lng:50.078056              	  },
    {


        city:"Dammam",
        name:'<b>King Fahd International Airport</b>',
        address:'King Fahad road - Al Etesalat Dist',
        //airport:'',
        phone:'<span>Tel:013 8838786</span><span>Fax:013 8838787</span><span>Mobile:0593328333</span>',
        worktiming:'Working Time: </br>24 Hours',
        locating:'Map: <a class="underline">View Location</a>',
        type:'Airport',
        lat:26.468500,
        lng:49.799856              	  },

    {


        city:"Dammam",
        name:'<b>King Fahd Street</b>',
        address:'King Fahad road - Al Etesalat Dist',
        //airport:'',
        phone:'<span>Tel:013 8422808</span><span>Fax:013-8420081</span><span>Mobile:0593331824</span>',
        worktiming:'Working Time: </br>Saturday - Thursday: 08:00 - 12:00 / 16:00 - 22:00<br/>Friday: 16:00 - 22:00',
        locating:'Map: <a class="underline">View Location</a>',
        type:'Branch',
        lat:26.416947,
        lng:50.081733              	  },
    {


        city:"Dammam",
        name:'<b>TOYOTA King Saud Street </b>',
        address:'King Saud ST - Toyota Agency',
        //airport:'',
        phone:'<span>Tel:593331819</span><span>Fax:</span><span>Mobile:0593331819</span>',
        worktiming:'Working Time: </br>Saturday - Thursday: 08:00 - 12:00 / 16:00 - 22:00<br/>Friday: Closed',
        locating:'Map: <a class="underline">View Location</a>',
        type:'Branch',
        lat:26.440689,
        lng:50.069889              	  },


    {


        city:"Jubail",
        name:'<b>Downtown</b>',
        address:'Jub_ services And support  138 ST Besaid National Bank',
        //airport:'',
        phone:'<span>Tel:013 3634942</span><span>Fax:599352884</span><span>Mobile:0593017778</span>',
        worktiming:'Working Time: </br>Saturday - Thursday: 08:00 - 12:00 / 16:00 - 22:00<br/>Friday: 16:00 - 22:00',
        locating:'Map: <a class="underline">View Location</a>',
        type:'Branch',
        lat:27.006844,
        lng:49.660519              	  },
    {


        city:"Jubail",
        name:'<b>Royal Commission </b>',
        address:'Has_ Prince Talal ST Besaid College of Sharia',
        //airport:'',
        phone:'<span>Tel:013 3410832</span><span>Fax:013 3410832</span><span>Mobile:0593017779</span>',
        worktiming:'Working Time: </br>Saturday - Thursday: 08:00 - 12:00 / 14:00 - 21:00<br/>Friday: 16:00 - 21:00',
        locating:'Map: <a class="underline">View Location</a>',
        type:'Branch',
        lat:27.083189,
        lng:49.558928              	  },

    {


        city:"Khobar",
        name:'<b>MAIN - Dhahran road</b>',
        address:'Dhahran road - towards Khober - Beside STC',
        //airport:'',
        phone:'<span>Tel:013 8972555</span><span>Fax:013 8650885</span><span>Mobile:0593414682</span>',
        worktiming:'Working Time: </br>Saturday - Thursday: 08:00 - 00:00<br/>Friday: 16:00 - 22:00',
        locating:'Map: <a class="underline">View Location</a>',
        type:'Head Office',
        lat:26.283947,
        lng:50.206650              	  },
    {


        city:"Khobar",
        name:'<b>Silver Tower</b>',
        address:'intersection of King fahad Road with prince Faisal bin Fahad Road',
        //airport:'',
        phone:'<span>Tel:38948424</span><span>Fax:013 8652555</span><span>Mobile:0593331815</span>',
        worktiming:'Working Time: </br>Saturday - Thursday: 08:00 - 12:00 / 16:00 - 22:00<br/>Friday: 16:00 - 22:00',
        locating:'Map: <a class="underline">View Location</a>',
        type:'Branch',
        lat:26.302950,
        lng:50.209339              	  },
    {


        city:"Khobar",
        name:'<b>TOYOTA - Khalidia  </b>',
        address:'Toyota Khalidia',
        //airport:'',
        phone:'<span>Tel:593331818</span><span>Fax:</span><span>Mobile:0593331814</span>',
        worktiming:'Working Time: </br>Saturday - Thursday: 08:00 - 12:00 / 16:00 - 22:00<br/>Friday: Closed',
        locating:'Map: <a class="underline">View Location</a>',
        type:'Branch',
        lat:26.307744,
        lng:50.176150              	  },


    {


        city:"Al-Ahssa",
        name:'<b>Prince Talal</b>',
        address:'Has_ Prince Talal ST beside College of Sharia',
        //airport:'',
        phone:'<span>Tel:0593332708</span><span>Fax:</span><span>Mobile:0593332708</span>',
        worktiming:'Working Time: </br>Saturday - Thursday: 08:00 - 12:00 / 16:00 - 22:00<br/>Friday: 16:00 - 22:00',
        locating:'Map: <a class="underline">View Location</a>',
        type:'Branch',
        lat:25.388214,
        lng:49.573644              	  },
    {


        city:"Rabigh",
        name:'<b>Main Branch</b>',
        address:'General ST- South  Riyadh  Bank',
        //airport:'',
        phone:'<span>Tel:02 4232584</span><span>Fax:4232582</span><span>Mobile:0593330985</span>',
        worktiming:'Working Time: </br>Saturday - Thursday: 09:00 - 12:00 / 17:00 - 22:00<br/>Friday: 17:00 - 22:00',
        locating:'Map: <a class="underline">View Location</a>',
        type:'Branch',
        lat:22.796855,
        lng:39.030175              	  },


];



//A utility function that translates a given type to an icon
function getIcon(type) {

    var get_data_type = type.toLowerCase();
    var types = get_data_type.replace(/\s+/g,"");

    switch(types) {
        case "branch": return "http://key.ed.sa/images/main-pointer.png?v=0.1";
        case "airport": return "http://key.ed.sa/images/map-pointer2.png";
        case "headoffice": return "http://key.ed.sa/images/map-pointer.png";
        default: return "http://key.ed.sa/images/main-pointer.png?v=0.1";
    }
}




function initialize() {

    var latlng = new google.maps.LatLng(24.73435301041049,46.735990047454834);
    var myOptions = {
        zoom: 5,
        center: latlng,
        mapTypeId: google.maps.MapTypeId.ROADMAP,
        gestureHandling: 'greedy'
    };

    map = new google.maps.Map(document.getElementById("map_canvas"),myOptions);

    var all_checkboxes = $('input[type="checkbox"]');

    var selTypes = [];
    for(var i=0, len=all_checkboxes.length; i<len; i++) {
        selTypes.push($(all_checkboxes[i]).val());
    }

    data.forEach(function(mapData,idx) {


        var marker = new google.maps.Marker({
            map: map,
            position: new google.maps.LatLng(mapData.lat,mapData.lng),
            title: mapData.city,
            icon: getIcon(mapData.type)
        });



        // This is content for marker when we click on any of them
        var contentHtml = "<div style='width:260px;height:120px'><h4>"+mapData.city+"</h4>"+mapData.name+"<br>"+mapData.address +"</div>";
        var infowindow = new google.maps.InfoWindow({
            content: contentHtml
        });

        google.maps.event.addListener(marker, 'click', function() {
            infowindow.open(map,marker);
        });

        marker.locid = idx+1;
        marker.infowindow = infowindow;
        markers[markers.length] = marker;


        // Creating block to display the sections of city etc
        var sideHtml = '<li class="box"><address class="loc stores" data-locid="'+marker.locid+'"><h2><a href="#">'+mapData.city+'</a></h2>';
        sideHtml += '<strong>'+mapData.name+'</strong>';
        sideHtml += '<span>'+mapData.address+'</span>';
        sideHtml += '<span>'+mapData.phone+'</span>';
        sideHtml += '<span>'+mapData.worktiming+'</span>';
        sideHtml += '<span>'+mapData.locating + '</span></address></li>';



        $("#locs ul.pagi").append(sideHtml);


    });

}


// Display the city in map when we click on city title from discription
$(document).on("click",".loc",function() {
    var thisloc = $(this).data("locid");
    for(var i=0; i<markers.length; i++) {
        if(markers[i].locid == thisloc) {

            //get the latlong
            if(lastinfowindow instanceof google.maps.InfoWindow) lastinfowindow.close();

            map.panTo(markers[i].getPosition());
            map.setZoom(15);
            markers[i].infowindow.open(map, markers[i]);

            lastinfowindow = markers[i].infowindow;
        }
    }
});

$(document).on("click",".loc",function() {
    var thisloc = $(this).data("locid");
    for(var i=0; i<markers.length; i++) {
        if(markers[i].locid == thisloc) {

            //get the latlong
            if(lastinfowindow instanceof google.maps.InfoWindow) lastinfowindow.close();

            map.panTo(markers[i].getPosition());
            map.setZoom(15);
            markers[i].infowindow.open(map, markers[i]);

            lastinfowindow = markers[i].infowindow;
        }
    }
});

/*
 Run on every change to the checkboxes. If you add more checkboxes to the page,
 we should use a class to make this more specific.
 */

function doFilter() {
    $("#select_airport").prop('selectedIndex',0);

    if(!locIndex) {
        locIndex = {};
        //I reverse index markers to figure out the position of loc to marker index
        for(var x=0, len=markers.length; x<len; x++) {
            locIndex[markers[x].locid] = x;
        }
    }

    var checkboxes_values = $("input[type=checkbox]:checked");
    var if_city_already_there = $("#select_city option:selected").val();


    var selTypes = [];
    for(var i=0, len=checkboxes_values.length; i<len; i++) {
        selTypes.push($(checkboxes_values[i]).val());
    }



    if (if_city_already_there == false) {

        var latilng = new google.maps.LatLng(24.73435301041049,46.735990047454834);

        var myOptions = {
            zoom: 5,
            center: latilng,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            gestureHandling: 'greedy'
        };

        map = new google.maps.Map(document.getElementById("map_canvas"),myOptions);

        sideH = '';
        data.forEach(function(getFilter,idx) {

            if($.inArray(getFilter.type, selTypes) > -1) {


                var marker_new = new google.maps.Marker({
                    map: map,
                    position: new google.maps.LatLng(getFilter.lat,getFilter.lng),
                    title: getFilter.city,
                    icon: getIcon(getFilter.type)
                });


                // This is content for marker when we click on any of them
                var contentH = "<div style='width:260px;height:120px'><h4>"+getFilter.city+"</h4>"+getFilter.name+"<br>"+getFilter.address +"</div>";
                var infowindow = new google.maps.InfoWindow({
                    content: contentH
                });

                google.maps.event.addListener(marker_new, 'click', function() {
                    infowindow.open(map,marker_new);
                });

                marker_new.locid = idx+1;
                marker_new.infowindow = infowindow;
                markers[markers.length] = marker_new;


                // Creating block to display the sections of city etc
                sideH += '<li class="box"><address class="loc stores" data-locid="'+marker_new.locid+'"><h2><a href="#">'+getFilter.city+'</a></h2>';
                sideH += '<strong>'+getFilter.name+'</strong>';
                sideH += '<span>'+getFilter.address+'</span>';
                sideH += '<span>'+getFilter.phone+'</span>';
                sideH += '<span>'+getFilter.worktiming+'</span>';
                sideH += '<span>'+getFilter.locating + '</span></address></li>';

            }

        });

        $("#locs ul.pagi").html(sideH);

    }
    else { //if City is already selected

        selTypes = [];
        for(var i=0, len=checkboxes_values.length; i<len; i++) {
            selTypes.push($(checkboxes_values[i]).val());
        }
        console.log(selTypes.length);
        if (selTypes != '') { // Display City data as per selected checkbox

            var myOptions = {
                zoom: 8,
                mapTypeId: google.maps.MapTypeId.ROADMAP,
                gestureHandling: 'greedy'
            };

            var bounds = new google.maps.LatLngBounds();
            map = new google.maps.Map(document.getElementById("map_canvas"),myOptions);


            sideH = '';
            data.forEach(function(getFilter,idx) {

                if(if_city_already_there == getFilter.city){

                    // Find if selected
                    if($.inArray(getFilter.type, selTypes) > -1) {

                        // This will get all the coordinates of different type like Airport, branches and Home office etc
                        var latlng = new google.maps.LatLng(getFilter.lat, getFilter.lng);
                        // Increase the bounds to take this point
                        bounds.extend(latlng);

                        var marker_new = new google.maps.Marker({
                            map: map,
                            position: new google.maps.LatLng(getFilter.lat,getFilter.lng),
                            title: getFilter.city,
                            icon: getIcon(getFilter.type)
                        });


                        // This is content for marker when we click on any of them
                        var contentH = "<div style='width:260px;height:120px'><h4>"+getFilter.city+"</h4>"+getFilter.name+"<br>"+getFilter.address +"</div>";
                        var infowindow = new google.maps.InfoWindow({
                            content: contentH
                        });

                        google.maps.event.addListener(marker_new, 'click', function() {
                            infowindow.open(map,marker_new);
                        });

                        marker_new.locid = idx+1;
                        marker_new.infowindow = infowindow;
                        markers[markers.length] = marker_new;

                        // Creating block to display the sections of city etc
                        sideH += '<li class="box"><h2><a href="#">'+getFilter.city+'</a></h2><address class="loc stores" data-locid="'+marker_new.locid+'">';
                        sideH += '<strong>'+getFilter.name+'</strong>';
                        sideH += '<span>'+getFilter.address+'</span>';
                        sideH += '<span>'+getFilter.phone+'</span>';
                        sideH += '<span>'+getFilter.worktiming+'</span>';
                        sideH += '<span>'+getFilter.locating + '</span></address></li>';

                    }

                }

            });

            //  Fit these bounds to the map
            map.fitBounds(bounds);
            $("#locs ul.pagi").html(sideH);


        }else{ //Display data when checkboxes aren't checked or unchecked but city is there in select box


            var myOptions = {
                zoom: 5,
                mapTypeId: google.maps.MapTypeId.ROADMAP,
                gestureHandling: 'greedy'
            };

            // Create a new viewpoint bound
            var bounds = new google.maps.LatLngBounds();
            map = new google.maps.Map(document.getElementById("map_canvas"),myOptions);


            var selected_city = $("#select_city").val();


            var sideHCity = '';

            data.forEach(function(cityFilter,idx) {

                if( cityFilter.city === selected_city ) {

                    // This will get all the coordinates of different type like Airport, branches and Home office etc
                    var latlng = new google.maps.LatLng(cityFilter.lat, cityFilter.lng);
                    // Increase the bounds to take this point
                    bounds.extend(latlng);

                    var marker_new = new google.maps.Marker({
                        map: map,
                        position: new google.maps.LatLng(cityFilter.lat,cityFilter.lng),
                        title: cityFilter.city,
                        icon: getIcon(cityFilter.type)
                    });

                    // This is content for marker when we click on any of them
                    var contentH = "<div style='width:260px;height:120px'><h4>"+cityFilter.city+"</h4>"+cityFilter.name+"<br>"+cityFilter.address +"</div>";
                    var infowindow = new google.maps.InfoWindow({
                        content: contentH
                    });

                    google.maps.event.addListener(marker_new, 'click', function() {
                        infowindow.open(map,marker_new);
                    });

                    marker_new.locid = idx+1;
                    marker_new.infowindow = infowindow;
                    markers[markers.length] = marker_new;

                    // Creating block to display the data into Store section under Map
                    sideHCity += '<li class="box"><address class="loc stores" data-locid="'+marker_new.locid+'"><h2><a href="#">'+cityFilter.city+'</a></h2>';
                    sideHCity += '<strong>'+cityFilter.name+'</strong>';
                    sideHCity += '<span>'+cityFilter.address+'</span>';
                    sideHCity += '<span>'+cityFilter.phone+'</span>';
                    sideHCity += '<span>'+cityFilter.worktiming+'</span>';
                    sideHCity += '<span>'+cityFilter.locating + '</span></address></li>';

                }

            });

            //  Fit these bounds to the map
            map.fitBounds(bounds);

            $("#locs ul.pagi").html(sideHCity);



        }


    }

}



function quickPagination(options){


    var defaults={
        pageSize:10,
        currentPage:1,
        holder:null,
        pagerLocation:"after"
    };

    var options=$.extend(defaults,options);

    return $("ul.pagi").each(function(){
        var selector=$(this);
        var pageCounter=1;

        selector.wrap("");
        selector.parents(".simplePagerContainer").find("ul.simplePagerNav").remove();

        selector.children().each(function(i){
            if(i<pageCounter*options.pageSize&&i>=(pageCounter-1)*options.pageSize){
                $(this).addClass("simplePagerPage"+pageCounter);
            }
            else{
                $(this).addClass("simplePagerPage"+(pageCounter+1));pageCounter++;}});
        selector.children().hide();
        selector.children(".simplePagerPage"+options.currentPage).show();

        if(pageCounter<=1){return;}
        var pageNav="<ul class='simplePagerNav pagger'>";

        for(i=1;i<=pageCounter;i++){
            if(i==options.currentPage){
                pageNav+="<li class='currentPage simplePageNav"+i+"'><a rel='"+i+"' href='#'>"+i+"</a></li>";
            }
            else{
                pageNav+="<li class='simplePageNav"+i+"'><a rel='"+i+"' href='#'>"+i+"</a></li>";
            }
        }

        pageNav+="</ul>";

        if(!options.holder){
            switch(options.pagerLocation)
            {
                case"before":selector.before(pageNav);
                    break;
                case"both":selector.before(pageNav);selector.after(pageNav);
                    break;
                default:selector.after(pageNav);
            }
        }
        else{
            $(options.holder).append(pageNav);
        }

        selector.parent().find(".simplePagerNav a").click(function(){
            var clickedLink=$(this).attr("rel");
            options.currentPage=clickedLink;

            if(options.holder){
                //alert('here');
                $(this).parent("li").parent("ul").parent(options.holder).find("li.currentPage").removeClass("currentPage");
                $(this).parent("li").parent("ul").parent(options.holder).find("a[rel='"+clickedLink+"']").parent("li").addClass("currentPage");
            }
            else{
                $(this).parent("li").parent("ul").parent(".simplePagerContainer").find("li.currentPage").removeClass("currentPage");
                $(this).parent("li").parent("ul").parent(".simplePagerContainer").find("a[rel='"+clickedLink+"']").parent("li").addClass("currentPage");
            }

            selector.children().hide();selector.find(".simplePagerPage"+clickedLink).show();

            return false;
        });
    });
}


$("input[type=checkbox]").on("click", function(){
    doFilter();
    quickPagination({pageSize:"8"});
});

$("input[type=checkbox]").on("click", function(){
    noFilter();
    quickPagination({pageSize:"8"});
});

// This function get called when none of the checkboxes are selected
function noFilter() {


    var checkboxes_values = $("input[type=checkbox]:checked");
    var selected_city = $("#select_city option:selected").val();


    selTypes = [];
    for(var i=0, len=checkboxes_values.length; i<len; i++) {
        selTypes.push($(checkboxes_values[i]).val());
    }


    if(selTypes.length === 0 && selected_city == '0'){
        console.log("Nothing is selected");
        data.forEach(function(getFilter,idx) {

            var marker_new = new google.maps.Marker({
                map: map,
                position: new google.maps.LatLng(getFilter.lat,getFilter.lng),
                title: getFilter.city,
                icon: getIcon(getFilter.type)
            });

            // This is content for marker when we click on any of them
            var contentH = "<div style='width:260px;height:120px'><h4>"+getFilter.city+"</h4>"+getFilter.name+"<br>"+getFilter.address +"</div>";
            var infowindow = new google.maps.InfoWindow({
                content: contentH
            });

            google.maps.event.addListener(marker_new, 'click', function() {
                infowindow.open(map,marker_new);
            });

            marker_new.locid = idx+1;
            marker_new.infowindow = infowindow;
            markers[markers.length] = marker_new;

            // Creating block to display the data into Store section under Map
            var sideHC = '<li class="box"><address class="loc stores" data-locid="'+marker_new.locid+'"><h2><a href="#">'+getFilter.city+'</a></h2>';
            sideHC += '<strong>'+getFilter.name+'</strong>';
            sideHC += '<span>'+getFilter.address+'</span>';
            sideHC += '<span>'+getFilter.phone+'</span>';
            sideHC += '<span>'+getFilter.worktiming+'</span>';
            sideHC += '<span>'+getFilter.locating + '</span></address></li>';


            $("#locs ul.pagi").append(sideHC);
        });

    }



}

// City Filter - On selecting city, filter the results
function  doDropdownFilter(){

    $("input[type=checkbox]").removeAttr("checked", "");
    $("#select_airport").prop('selectedIndex',0);

    var myOptions = {
        zoom: 5,
        mapTypeId: google.maps.MapTypeId.ROADMAP,
        gestureHandling: 'greedy'
    };

    // Create a new viewpoint bound
    var bounds = new google.maps.LatLngBounds();
    map = new google.maps.Map(document.getElementById("map_canvas"),myOptions);


    var selected_city = $("#select_city").val();


    var sideHCity = '';

    data.forEach(function(cityFilter,idx) {

        if( cityFilter.city === selected_city ) {

            // This will get all the coordinates of different type like Airport, branches and Home office etc
            var latlng = new google.maps.LatLng(cityFilter.lat, cityFilter.lng);
            // Increase the bounds to take this point
            bounds.extend(latlng);

            var marker_new = new google.maps.Marker({
                map: map,
                position: new google.maps.LatLng(cityFilter.lat,cityFilter.lng),
                title: cityFilter.city,
                icon: getIcon(cityFilter.type)
            });

            // This is content for marker when we click on any of them
            var contentH = "<div style='width:260px;height:120px'><h4>"+cityFilter.city+"</h4>"+cityFilter.name+"<br>"+cityFilter.address +"</div>";
            var infowindow = new google.maps.InfoWindow({
                content: contentH
            });

            google.maps.event.addListener(marker_new, 'click', function() {
                infowindow.open(map,marker_new);
            });

            marker_new.locid = idx+1;
            marker_new.infowindow = infowindow;
            markers[markers.length] = marker_new;

            // Creating block to display the data into Store section under Map
            sideHCity += '<li class="box"><address class="loc stores" data-locid="'+marker_new.locid+'"><h2><a href="#">'+cityFilter.city+'</a></h2>';
            sideHCity += '<strong>'+cityFilter.name+'</strong>';
            sideHCity += '<span>'+cityFilter.address+'</span>';
            sideHCity += '<span>'+cityFilter.phone+'</span>';
            sideHCity += '<span>'+cityFilter.worktiming+'</span>';
            sideHCity += '<span>'+cityFilter.locating + '</span></address></li>';

        }

    });

    //  Fit these bounds to the map
    map.fitBounds(bounds);

    $("#locs ul.pagi").html(sideHCity);

}


function noCityFilter() {


    var latilng = new google.maps.LatLng(24.73435301041049,46.735990047454834);
    var myOptions = {
        zoom: 5,
        center: latilng,
        mapTypeId: google.maps.MapTypeId.ROADMAP,
        gestureHandling: 'greedy'
    };

    map = new google.maps.Map(document.getElementById("map_canvas"),myOptions);

    var sideHC = '';
    data.forEach(function(getFilter,idx) {

        var marker_new = new google.maps.Marker({
            map: map,
            position: new google.maps.LatLng(getFilter.lat,getFilter.lng),
            title: getFilter.city,
            icon: getIcon(getFilter.type)
        });

        // This is content for marker when we click on any of them
        var contentH = "<div style='width:260px;height:120px'><h4>"+getFilter.city+"</h4>"+getFilter.name+"<br>"+getFilter.address +"</div>";
        var infowindow = new google.maps.InfoWindow({
            content: contentH
        });

        google.maps.event.addListener(marker_new, 'click', function() {
            infowindow.open(map,marker_new);
        });

        marker_new.locid = idx+1;
        marker_new.infowindow = infowindow;
        markers[markers.length] = marker_new;

        // Creating block to display the data into Store section under Map
        sideHC += '<li class="box"><address class="loc stores" data-locid="'+marker_new.locid+'"><h2><a href="#">'+getFilter.city+'</a></h2>';
        sideHC += '<strong>'+getFilter.name+'</strong>';
        sideHC += '<span>'+getFilter.address+'</span>';
        sideHC += '<span>'+getFilter.phone+'</span>';
        sideHC += '<span>'+getFilter.worktiming+'</span>';
        sideHC += '<span>'+getFilter.locating + '</span></address></li>';



    });

    $("#locs ul.pagi").html(sideHC);
}


$("#select_city").on("change",function(){
    var if_value_is_there = $("#select_city").val();

    if(if_value_is_there == 0){
        noCityFilter();
    }
    else{
        doDropdownFilter();
    }

    quickPagination({pageSize:"8"});
});

$("#select_airport").on("change",function(){
    var if_airport_is_there = $("#select_airport").val();

    if(if_airport_is_there == 0 ){
        noCityFilter();
    }
    else{
        airportFilter();
    }

    quickPagination({pageSize:"8"});
});



// Airport Filter - On selecting airport filter the results
function airportFilter(){

    $("input[type=checkbox]").removeAttr("checked", "");
    $("#select_city").prop('selectedIndex',0);

    var airport_lat = $('#select_airport option:selected').attr('data-lat');
    var airport_lng = $('#select_airport option:selected').attr('data-lng');
    var selected_airport = $("#select_airport").val();

    var latilngi = new google.maps.LatLng(airport_lat,airport_lng);
    var myOptions = {
        zoom: 13,
        center: latilngi,
        mapTypeId: google.maps.MapTypeId.ROADMAP,
        gestureHandling: 'greedy'
    };

    map = new google.maps.Map(document.getElementById("map_canvas"),myOptions);

    if ( selected_airport !== false ) {
        var sideHAirport = '';
        data.forEach(function(airportFilter,idx) {

            if( airportFilter.type === "Airport" && airportFilter.city === selected_airport) {


                var marker_new = new google.maps.Marker({
                    map: map,
                    position: new google.maps.LatLng(airportFilter.lat,airportFilter.lng),
                    title: airportFilter.city,
                    icon: getIcon(airportFilter.type)
                });



                // This is content for marker when we click on any of them
                var contentH = "<div style='width:260px;height:120px'><h4>"+airportFilter.city+"</h4>"+airportFilter.name+"<br>"+airportFilter.address +"</div>";
                var infowindow = new google.maps.InfoWindow({
                    content: contentH
                });

                google.maps.event.addListener(marker_new, 'click', function() {
                    infowindow.open(map,marker_new);
                });

                marker_new.locid = idx+1;
                marker_new.infowindow = infowindow;
                markers[markers.length] = marker_new;


                // Creating block to display the data into Store section under Map
                sideHAirport += '<li class="box"><address class="loc stores" data-locid="'+marker_new.locid+'"><h2><a href="#">'+airportFilter.city+'</a></h2>';
                sideHAirport += '<strong>'+airportFilter.name+'</strong>';
                sideHAirport += '<span>'+airportFilter.address+'</span>';
                sideHAirport += '<span>'+airportFilter.phone+'</span>';
                sideHAirport += '<span>'+airportFilter.worktiming+'</span>';
                sideHAirport += '<span>'+airportFilter.locating + '</span></address></li>';

            }

        });

        $("#locs ul.pagi").html(sideHAirport);

    }
}


jQuery.noConflict();
(function($){
    jQuery(document).ready(function(){

        initialize();
        quickPagination({pageSize:"8"});

    });

})(jQuery);


jQuery(document).ready(function(){
    // function which will show cars of same company together
    // under fleet Page car slider

    $('.add_inssurance').click(function() {
        data = $(this).attr('id');
        arr = data.split('-');
        carid = arr[1];
        days = $("#text-"+carid).val();

        var $this = $(this);

        jQuery.ajax({
            type: 'POST',
            data: '&days=' +days+'&carid='+carid,
            url: '/car/get-price-per-day',
            dataType: 'json',
            success: function(result){
                //console.log(result);

                old_price 		= Number(result.old);
                new_price 		= Number(result.new);
                old_inssurance 	= Number(result.old_inssurance);
                new_inssurance 	= Number(result.inssurance);

                // $this will contain a reference to the checkbox
                if ($this.is(':checked'))
                {
                    // the checkbox was checked

                    result_old_price = old_price + old_inssurance;
                    result_new_price = new_price + new_inssurance;

                    if(result_old_price > result_new_price){
                        $("#price_"+carid).html('<span id="old_price_'+carid+'" class="over_line">'+result_old_price+' SR </span><span id="new_price_'+carid+'" class="price">'+result_new_price+' SR</span>');
                    }else{
                        $("#price_"+carid).html('<span id="new_price_'+carid+'" class="price">'+result_new_price+' SR</span>');
                    }

                    $('#advanced-search-block-'+carid).show();

                }
                else
                {
                    // the checkbox was unchecked

                    result_old_price = old_price;
                    result_new_price = new_price;

                    if(result_old_price > result_new_price){
                        $("#price_"+carid).html('<span id="old_price_'+carid+'" class="over_line">'+result_old_price+' SR</span><span id="new_price_'+carid+'" class="price">'+result_new_price+' SR</span>');
                    }else{
                        $("#price_"+carid).html('<span id="new_price_'+carid+'" class="price">'+result_new_price+' SR</span>');
                    }

                    $('#advanced-search-block-'+carid).hide();
                }
            }
        });

    });

    $(".txtprice").change(function(){

        data = $(this).attr('id');
        //console.log(data);
        arr = data.split('-');
        carid = arr[1];
        days = $("#text-"+carid).val();

        jQuery.ajax({
            type: 'POST',
            data: '&days=' +days+'&carid='+carid,
            url: '/car/get-price-per-day',
            dataType: 'json',
            success: function(result){
                //// Second method - Makes code more readable (e.g. in if statements)
                // $('#checkbox').is(':checked')  // Boolean true
                if($('#checkbox-'+carid).is(':checked'))
                {
                    old_price 		= Number(result.old);
                    new_price 		= Number(result.new);
                    old_inssurance 	= Number(result.old_inssurance);
                    new_inssurance 	= Number(result.inssurance);

                    result_old_price = old_price + old_inssurance;
                    result_new_price = new_price + new_inssurance;

                    if(result_old_price > result_new_price){
                        $("#price_"+carid).html('<span id="old_price_'+carid+'" class="over_line">'+result_old_price+' SR </span><span id="new_price_'+carid+'" class="price">'+result_new_price+' SR</span>');
                    }else{
                        $("#price_"+carid).html('<span id="new_price_'+carid+'" class="price">'+result_new_price+' SR</span>');
                    }

                    if(old_inssurance > new_inssurance){
                        $("#inssurance_"+carid).html('<span id="old_inssurance_'+carid+'" class="over_line">'+old_inssurance+' SR </span><span id="new_inssurance_'+carid+'" class="price"> '+new_inssurance+' SR</span>');
                    }else{
                        $("#inssurance_"+carid).html('<span id="new_inssurance_'+carid+'" class="price">'+new_inssurance+' SR</span>');
                    }
                }
                else
                {

                    if(result.old > result.new){
                        $("#price_"+carid).html('<span id="old_price_'+carid+'" class="over_line">'+result.old+' SR </span><span id="new_price_'+carid+'" class="price"> '+result.new+' SR</span>');
                    }else{
                        $("#price_"+carid).html('<span id="new_price_'+carid+'" class="price">'+result.new+' SR</span>');
                    }

                    if(result.old_inssurance > result.inssurance){
                        $("#inssurance_"+carid).html('<span id="old_inssurance_'+carid+'" class="over_line">'+result.old_inssurance+' SR</span><span id="new_inssurance_'+carid+'" class="price"> '+result.inssurance+' SR</span>');
                    }else{
                        $("#inssurance_"+carid).html('<span id="new_inssurance_'+carid+'" class="price">'+result.inssurance+' SR</span>');
                    }
                }
            }
        });
    });

    $('.btn-request').click(function() {
        data = $(this).attr('id');

        arr = data.split('_');
        carid = arr[1];

        data = $("#new_price_"+carid).text();
        total_price = data.replace(/\D/g,'');

        $("#pro_info-"+carid+" form div input.key-sa-request-number-of-days").val($("#text-"+carid).val());
        $("#pro_info-"+carid+" form div input.key-sa-request-total-price").val(total_price);
        $("#pro_info-"+carid+" form div input.key-sa-request-car-id").val(carid);
    });
});
/* ******************************************************* */

jQuery(window).load(function() {
    $("#flexisel").flexisel({
            visibleItems: 4,
            animationSpeed: 200,
            autoPlay: true,
            autoPlaySpeed: 3000,
            pauseOnHover: true,
            clone:false,
            enableResponsiveBreakpoints: true,
            responsiveBreakpoints: {
                portrait: {
                    changePoint:480,
                    visibleItems: 1
                },
                landscape: {
                    changePoint:640,
                    visibleItems: 2
                },
                tablet: {
                    changePoint:768,
                    visibleItems: 3
                }
            }
        }
    );
});

jQuery(document).ready(function() {
        $('#edit-field-key-sa-request-mobile-no-und-0-value').val('');
        $('#edit-field-key-sa-request-full-name-und-0-value').val('');
        $('#edit-field-key-sa-request-email-und-0-email').val('');

        $('#firstSlide').fadeIn();
        $('#testimonials .slide');
        setInterval(function(){
            $('#testimonials .slide').filter(':visible').fadeOut(3000,function(){
                if($(this).next('li.slide').size()){
                    $(this).next().fadeIn(3000);
                }
                else{
                    $('#testimonials .slide').eq(0).fadeIn(3000);
                }
            });
        },10000);

        $('#career_outer').easyResponsiveTabs({
            type: 'default', //Types: default, vertical, accordion
            width: 'auto', //auto or any width like 600px
            fit: true,   // 100% fit in a container
            closed: 'accordion', // Start closed if in accordion view
            activate: function(event) { // Callback function if tab is switched
                var $tab  = $(this);
                var $info = $('#tabInfo');
                var $name = $('span', $info);

                $name.text($tab.text());

                $info.show();
            }
        });

        smallSlider();

        $(".margin-25-bottom ul.slider").each(function(){
            totalActive = $(this).find("li").length;

            var num = 4;
            if( parseInt(totalActive) > parseInt(num) ) {
                $(this).removeClass("test");
            }else{
                $(this).addClass("test");
            }

        });

        $(".test").parent().parent().parent().find(".bx-controls").remove();
    });

function smallSlider(){


    $('.slider').bxSlider({
        mode: 'horizontal',
        auto: false,
        loop: false,
        autoControls: true,
        pause: 2000,
        pauseOnHover: true,
        clone:false,
        enableResponsiveBreakpoints: true,
        responsiveBreakpoints: {
            portrait: {
                changePoint:480,
                visibleItems: 1
            },
            landscape: {
                changePoint:640,
                visibleItems: 2
            },
            tablet: {
                changePoint:768,
                visibleItems: 3
            }
        }
    });

}

function smallSliderForOnClick(option, activeElements){

    var elementClass = option;
    var countElements = activeElements;


    $(elementClass).oxSlider({
        mode: 'horizontal',
        auto: false,
        loop: false,
        autoControls: true,
        pause: 2000,
        pauseOnHover: true,
        clone:false,
        controls: ( countElements > 3) ? true: false,
        enableResponsiveBreakpoints: true,
        responsiveBreakpoints: {
            portrait: {
                changePoint:480,
                visibleItems: 1
            },
            landscape: {
                changePoint:640,
                visibleItems: 2
            },
            tablet: {
                changePoint:768,
                visibleItems: 3
            }
        }
    });

}


// Fleet Page filters for cars
jQuery(".car_type_filter").on('change', function(){

    $(".margin-25-bottom").removeClass("selected");
    var car_type_id = $(this).val();

    // Adding class to parent div section of slider
    $(this).parent().parent().parent().addClass("selected");

    $('.selected').find(".bx-controls").remove();

    var creatHtml = '';
    $(".selected ul.slider li").each(function(idx, li) {

        var product = $(li);
        var carTypeId = product.data("cartype");
        var carCat = product.data("cat");
        var combinedType = product.data("combine");

        if (parseInt(car_type_id) == parseInt(carTypeId)){
            if(carCat != "undefined"){
                creatHtml += "<li class='mix category_11 showed' data-combine='"+combinedType+"' data-cat='"+carCat+"' data-cartype='"+carTypeId+"'>"
                creatHtml += product.html();
                creatHtml += "</li>";
            }
        }
        else if (car_type_id == "0"){
            if(carCat != "undefined"){
                creatHtml += "<li class='mix category_11 showed' data-combine='"+combinedType+"' data-cat='"+carCat+"' data-cartype='"+carTypeId+"' >"
                creatHtml += product.html();
                creatHtml += "</li>";
            }
        }
        else{
            if(carCat != "undefined"){
                creatHtml += "<li style='display:none;' class='mix category_11' data-combine='"+combinedType+"' data-cat='"+carCat+"' data-cartype='"+carTypeId+"' >"
                creatHtml += product.html();
                creatHtml += "</li>";
            }
        }


    });

    creatHtml += '<li data-cartype="undefined" data-cat="undefined" data-combine="undefined" class="mix category_11" style="float: right; list-style: none outside none; position: relative; width: 713px;display:none;"></li>'

    $(".selected ul.slider").html(creatHtml);
    var elClass = $(".selected ul.slider");
    var countSliderLi = $(".selected ul.slider li.showed").length;

    smallSliderForOnClick(elClass,countSliderLi);
});

// validation for Get Quotation form
var form = $("#key-sa-quotation-form");
var numberOfDays = $('#edit-number-of-days');
var selectCarCategory = $('#edit-car-category');


selectCarCategory.change(checkCarCategoryField);
numberOfDays.keyup(checkDayField);

function checkDayField(){
    var  checkNumber = $('#edit-number-of-days').val();
    if (checkNumber == ''){
        $('#edit-number-of-days').css('background','#FF8080');
        return false;
    }
    else if(isNaN(checkNumber)){
        $('#edit-number-of-days').css('background','#FF8080');
        return false;
    }
    else {
        $('#edit-number-of-days').css('background','#FFFFFF');
        return true;
    }

}

function checkCarCategoryField(){
    var  checkCarCategory = $('#edit-car-category').val();
    if (checkCarCategory == ''){
        $('#edit-car-category').css('background','#FF8080');
        return false;
    }else {
        $('#edit-car-category').css('background','#FFFFFF');
        return true;
    }

}


form.submit(function(){

    if (checkDayField() & checkCarCategoryField()){
        return true;
    }else{
        return false;
    }

}); // Validation code ends for Get Quotation form


// validation for newsletter form
var form2 = $("#simplenews-block-form-430");
var emailField = $('#edit-mail');

emailField.keyup(checkEmailField);
emailField.blur(checkEmailField);

function checkEmailField(){

    var  checkEmail = $('#edit-mail').val();
    var filter = /^[a-zA-Z0-9]+[a-zA-Z0-9_.-]+[a-zA-Z0-9_-]+@[a-zA-Z0-9]+[a-zA-Z0-9.-]+[a-zA-Z0-9]+.[a-z]{2,4}$/;

    //if it's valid email
    if(!filter.test(checkEmail)) {
        $('#edit-mail').css('background','#FF8080');
        return false;
    }
    else {
        $('#edit-mail').css('background','#FFFFFF');
        return true;
    }

}


form2.submit(function(){

    if (checkEmailField()){
        return true;
    }else{
        return false;
    }

}); // Validation code ends for Newsletter form


// validation for contact form
var form3 = $("#contact-site-form");
var nameField = $('#edit-name');
var phoneField = $('#edit-phone');
var countryField = $('#edit-country');
var contactEmailField = $('#edit-mail');
var messageField = $('#edit-message');

nameField.keyup(checkNameField);
phoneField.keyup(checkPhoneField);
countryField.change(checkCountryField);
contactEmailField.keyup(checkContactEmailField);
contactEmailField.blur(checkContactEmailField);
messageField.change(checkMessageField);

function checkNameField(){

    var  checkName = $('#edit-name').val();
    if(checkName == '') {
        $('#edit-name').css('background','#FF8080');
        return false;
    }
    else {
        $('#edit-name').css('background','#FFFFFF');
        return true;
    }

}

function checkPhoneField(){

    var  checkPhone = $('#edit-phone').val();
    if(checkPhone == '') {
        $('#edit-phone').css('background','#FF8080');
        return false;
    }
    else if(isNaN(checkPhone)){
        $('#edit-phone').css('background','#FF8080');
        return false;
    }
    else if(checkPhone.length < 10 || checkPhone.length > 15){
        $('#edit-phone').css('background','#FF8080');
        return false;
    }
    else {
        $('#edit-phone').css('background','#FFFFFF');
        return true;
    }

}

function checkContactEmailField(){

    var  checkEmail = $('#edit-mail').val();
    var filter = /^[a-zA-Z0-9]+[a-zA-Z0-9_.-]+[a-zA-Z0-9_-]+@[a-zA-Z0-9]+[a-zA-Z0-9.-]+[a-zA-Z0-9]+.[a-z]{2,4}$/;

    //if it's valid email
    if(!filter.test(checkEmail)) {
        $('#edit-mail').css('background','#FF8080');
        return false;
    }
    else {
        $('#edit-mail').css('background','#FFFFFF');
        return true;
    }

}

function checkCountryField(){

    var  checkCountry = $('#edit-country').val();
    if(checkCountry == '') {
        $('#edit-country').css('background','#FF8080');
        return false;
    }
    else {
        $('#edit-country').css('background','#FFFFFF');
        return true;
    }

}


function checkMessageField(){

    var  checkInquery = $('#edit-message').val();
    if(checkInquery == '') {
        $('#edit-message').css('background','#FF8080');
        return false;
    }
    else {
        $('#edit-message').css('background','#FFFFFF');
        return true;
    }

}


form3.submit(function(){

    if (checkNameField() & checkContactEmailField() & checkPhoneField() & checkCountryField() & checkMessageField()) {
        return true;
    }
    else {
        return false;
    }

}); // Validation code ends for contact form


// Validation for Request a Callback form
var form4 = $("#key-sa-request-form");
var fullNameField = $('#edit-field-key-sa-request-full-name-und-0-value');
var mobileField = $('#edit-field-key-sa-request-mobile-no-und-0-value');
var requestEmailField = $('#edit-field-key-sa-request-email-und-0-email');

fullNameField.keyup(checkFullNameField);
mobileField.keyup(checkMobileField);
requestEmailField.keyup(checkRequestEmailField);

function checkFullNameField(){

    var  checkFullName = $('#edit-field-key-sa-request-full-name-und-0-value').val();
    if(checkFullName == '') {
        $('#edit-field-key-sa-request-full-name-und-0-value').css('background','#FF8080');
        return false;
    }
    else {
        $('#edit-field-key-sa-request-full-name-und-0-value').css('background','#FFFFFF');
        return true;
    }

}


function checkMobileField(){

    var  checkMobile = $('#edit-field-key-sa-request-mobile-no-und-0-value').val();
    if(checkMobile == '') {
        $('#edit-field-key-sa-request-mobile-no-und-0-value').css('background','#FF8080');
        return false;
    }
    else if(isNaN(checkMobile)){
        $('#edit-field-key-sa-request-mobile-no-und-0-value').css('background','#FF8080');
        return false;
    }
    else if(checkMobile.length < 10 || checkMobile.length > 15){
        $('#edit-field-key-sa-request-mobile-no-und-0-value').css('background','#FF8080');
        return false;
    }
    else {
        $('#edit-field-key-sa-request-mobile-no-und-0-value').css('background','#FFFFFF');
        return true;
    }

}


function checkRequestEmailField(){

    var  checkRequestEmail = $('#edit-field-key-sa-request-email-und-0-email').val();
    if (checkRequestEmail != ''){
        var filter = /^[a-zA-Z0-9]+[a-zA-Z0-9_.-]+[a-zA-Z0-9_-]+@[a-zA-Z0-9]+[a-zA-Z0-9.-]+[a-zA-Z0-9]+.[a-z]{2,4}$/;

        //if it's valid email
        if(!filter.test(checkRequestEmail)) {
            $('#edit-field-key-sa-request-email-und-0-email').css('background','#FF8080');
            return false;
        }
        else {
            $('#edit-field-key-sa-request-email-und-0-email').css('background','#FFFFFF');
            return true;
        }
    }
    else {
        $('#edit-field-key-sa-request-email-und-0-email').css('background','#FFFFFF');
        return true;
    }

}


form4.submit(function(){

    if ( checkFullNameField() & checkMobileField() & checkRequestEmailField()){
        return true;
    }else{
        return false;
    }

}); // Validation code ends for Request a Callback form
