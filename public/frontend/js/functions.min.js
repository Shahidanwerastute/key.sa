var dt=new Date,current_year=dt.getFullYear(),current_month=dt.getMonth()+1,current_date=dt.getDate();$(document).ready((function(){1!=corporate_loyalty&&0!=logged_in_from_frontend||1!=show_customer_popup_after_search||"search-results"!==last_segment||!0!==show_loyalty_popup_in_booking||"yes"==loyalty_tried||$("#OpenPopUpForLoyaltyConfirmation").click(),$("form,input,select,textarea").attr("autocomplete","off")})),$("#corporateCompanies").on("shown.bs.modal",(function(){$(document).off("focusin.modal")})),$(document).ready((function(){if("arb"==lang)var e="rtl",t="ar";else e="ltr",t="en";$(".multiselect").select2({dir:e,language:t})})),$(document).ready((function(){if("arb"==lang)var e="rtl",t="ar";else e="ltr",t="en";$(".searchable").select2({dir:e,minimumInputLength:2,language:t})})),$(document).ready((function(){$("#datepicker_from").datepicker({dateFormat:"dd-mm-yy",minDate:0,changeMonth:!1,changeYear:!1,onSelect:function(e){var t=$("#datepicker_from").datepicker("getDate");if(t.setDate(t.getDate()),$("#datepicker_to").hasClass("datepicker_to_for_monthly_tab")){var a=$("#datepicker_from").datepicker("getDate");a.setMonth(a.getMonth()+1),$("#datepicker_to").datepicker("option","minDate",a)}else $("#datepicker_to").datepicker("option","minDate",t)}}),$("#datepicker_to").datepicker({dateFormat:"dd-mm-yy",changeMonth:!1,changeYear:!1,beforeShow:function(){var e=$("#datepicker_from").datepicker("getDate");if(e.setDate(e.getDate()),$("#datepicker_to").hasClass("datepicker_to_for_monthly_tab")){var t=$("#datepicker_from").datepicker("getDate");t.setMonth(t.getMonth()+1),$("#datepicker_to").datepicker("option","minDate",t)}else $("#datepicker_to").datepicker("option","minDate",e)},onClose:function(){$("#datepicker_from").datepicker("getDate"),$("#datepicker_to").datepicker("getDate")}}),$("#datepicker_mobile_id").datepicker({minDate:0,numberOfMonths:[1,1],beforeShowDay:function(e){var t=$.datepicker.parseDate("dd-mm-yy",$("#datepicker_from").val()),a=$.datepicker.parseDate("dd-mm-yy",$("#datepicker_to").val());return[!0,t&&(e.getTime()==t.getTime()||a&&e>=t&&e<=a)?"dp-highlight":""]},onSelect:function(e,t){var a=$.datepicker.parseDate("dd-mm-yy",$("#datepicker_from").val()),o=$.datepicker.parseDate("dd-mm-yy",$("#datepicker_to").val()),i=$.datepicker.parseDate("dd-mm-yy",e);if("eng"===lang)var n=$.datepicker.formatDate("dd M yy",i,{monthNamesShort:$.datepicker.regional.en.monthNamesShort});else{$.datepicker.regional.ar={monthNames:["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"]};n=$.datepicker.formatDate("dd MM yy",i,{monthNames:$.datepicker.regional.ar.monthNames})}!a||o||i<a?($("#datepicker_from").val(e),$("#datepicker_to").val(""),$("#pickup_date_gry_bx").text(n),$("#dropoff_date_gry_bx").text(""),$(this).datepicker()):($("#datepicker_to").val(e),$("#dropoff_date_gry_bx").text(n),$(this).datepicker())}}),$("#mob-menu").on("click",(function(){$("body").addClass("indexMenu")})),$("#closeTopMenu").on("click",(function(){$("body").removeClass("indexMenu")})),$(".select_pickup_time").on("click",(function(){$(".select_pickup_time").removeClass("selected"),$(this).addClass("selected");var e=$(this).attr("data-pickUpTime");$("#pickup_time_gry_bx").text(e),$("#pickUpTime_hdn").val(e)})),$(".select_dropoff_time").on("click",(function(){$(".select_dropoff_time").removeClass("selected"),$(this).addClass("selected");var e=$(this).attr("data-dropOffTime");$("#dropoff_time_gry_bx").text(e),$("#dropOffTime_hdn").val(e)})),$(".datepicker_past_date").datepicker({dateFormat:"dd-mm-yy",changeMonth:!0,changeYear:!0,maxDate:new Date(current_year-10,current_month,current_date),minDate:new Date(1950,6,12),yearRange:"c-70:+0"}),$(".dob_dp").datepicker({dateFormat:"dd/mm/yy",changeMonth:!0,changeYear:!0,maxDate:new Date(current_year-10,current_month,current_date),minDate:new Date(1950,6,12),yearRange:"c-70:+0"}),$(".datepicker_near_past_date").datepicker({dateFormat:"dd-mm-yy",changeMonth:!0,changeYear:!0,maxDate:new Date(current_year,current_month,current_date-1),minDate:new Date(1970,6,12),yearRange:"c-70:+0"}),$(".datepicker_future_date").datepicker({dateFormat:"dd-mm-yy",changeMonth:!0,changeYear:!0,minDate:new Date}),""!=$("#datepicker_from").val()&&$("#datepicker_to").datepicker("option","minDate",$("#datepicker_from").val()),"arb"===lang?$((function(){$("#datepicker_from").datepicker("option",$.datepicker.regional.ar),$("#datepicker_to").datepicker("option",$.datepicker.regional.ar),$(".datepicker_past_date").datepicker("option",$.datepicker.regional.ar),$(".datepicker_near_past_date").datepicker("option",$.datepicker.regional.ar),$(".datepicker_future_date").datepicker("option",$.datepicker.regional.ar),$("#datepicker_mobile_id").datepicker("option",$.datepicker.regional.ar),$(".dob_dp").datepicker("option",$.datepicker.regional.ar),$("#datepicker_from").datepicker("option","dateFormat","dd-mm-yy"),$("#datepicker_to").datepicker("option","dateFormat","dd-mm-yy"),$(".datepicker_past_date").datepicker("option","dateFormat","dd-mm-yy"),$(".datepicker_near_past_date").datepicker("option","dateFormat","dd-mm-yy"),$(".datepicker_future_date").datepicker("option","dateFormat","dd-mm-yy"),$("#datepicker_mobile_id").datepicker("option","dateFormat","dd-mm-yy"),$("#datepicker_from, #datepicker_to, #datepicker_mobile_id, .dob_dp").datepicker("option","monthNames",["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"])})):$((function(){$("#datepicker_from").datepicker("option",$.datepicker.regional["en-GB"]),$("#datepicker_to").datepicker("option",$.datepicker.regional["en-GB"]),$(".datepicker_past_date").datepicker("option",$.datepicker.regional["en-GB"]),$(".datepicker_near_past_date").datepicker("option",$.datepicker.regional["en-GB"]),$(".datepicker_future_date").datepicker("option",$.datepicker.regional["en-GB"]),$("#datepicker_mobile_id").datepicker("option",$.datepicker.regional["en-GB"]),$(".dob_dp").datepicker("option",$.datepicker.regional["en-GB"]),$("#datepicker_from").datepicker("option","dateFormat","dd-mm-yy"),$("#datepicker_to").datepicker("option","dateFormat","dd-mm-yy"),$(".datepicker_past_date").datepicker("option","dateFormat","dd-mm-yy"),$(".datepicker_near_past_date").datepicker("option","dateFormat","dd-mm-yy"),$(".datepicker_future_date").datepicker("option","dateFormat","dd-mm-yy"),$("#datepicker_mobile_id").datepicker("option","dateFormat","dd-mm-yy")}))})),$(document).ready((function(){$(".custom_calendar").calendarsPicker(),$("#selectCalendar").change((function(){$(".custom_calendar").val(""),calendar=$.calendars.instance($(this).val());var e=function(e){return e&&"object"==typeof e?calendar.fromJD(e.toJD()):e};$(".custom_calendar").each((function(){var t=$(this).calendarsPicker("option");$(this).calendarsPicker("option",{calendar:calendar,onSelect:null,onChangeMonthYear:null,dateFormat:"dd-mm-yyyy",changeYear:!0,defaultDate:e(t.defaultDate),minDate:e(t.minDate),maxDate:e(t.maxDate)}).calendarsPicker("option",{onSelect:t.onSelect,onChangeMonthYear:t.onChangeMonthYear})}))}))}));var path=window.location.pathname,page=path.split("/").pop();page=path.split("/").pop();function validateGenericForm(){var e=!0,t=$("#corporate_company_id").val(),a=$("#is_super_corporate").val();return $("input.required-for-search, select.required-for-search").each((function(){""==$(this).val()?($(this).attr("data-original-title",required_message),$(this).tooltip("show"),e=!1):"1"===a&&(""===t||t<0)&&(e=!1,$("#superCorpModal").modal("show"))})),e}function validateForm(){var e=!1;if($(".signup_form_new_user input.required, .signup_form_new_user input.required-optional, .signup_form_new_user select.required").each((function(){""==$(this).val()?($(this).attr("data-original-title",required_message),$(this).tooltip("show"),e=!0):$(this).tooltip("hide")})),void 0!==$(".accept_terms").val())if($(".accept_terms").is(":checked"));else{if("eng"==lang)var t="Please accept the terms and conditions to proceed.",a="Message";else t="الرجاء الموافقة على الشروط والأحكام",a="الرسالة";$(".responseTitle").html(a),$(".responseMsg").html(t),$("#openMsgPopupNoRedirect").click(),e=!0}return void 0!==$(".extra_info").val()&&$(".extra_info").is(":checked")&&$("input.required-optional, select.required-optional").each((function(){""==$(this).val()?($(this).attr("data-original-title",required_message),$(this).tooltip("show"),e=!0):$(this).tooltip("hide")})),void 0!==$(".id_no").val()&&(""==$(".id_no").val()?($(".id_no").attr("data-original-title",required_message),$(".id_no").tooltip("show"),e=!0):$(".id_no").tooltip("hide")),!e}function validationPoints_form(){$("form input").attr("data-original-title","");var e=$("#name").val(),t=$("#email").val(),a=$("#id_number").val(),o=$("#mobile").val();if("eng"===lang)var i="Please fill out this field.",n="Please enter valid email address",r="Please enter valid Id number",s="Please enter 9 Digit valid mobile number without plus sign",l="Please accept the terms and conditions to proceed.",d="Message";else i="الرجاء تعبئة الخانة",n="يرجى إدخال عنوان بريد إلكتروني صالح",r="يرجى إدخال رقم الهوية صالح",s="يرجى إدخال رقم الجوال المكون من 9 رقم دون علامة زائدة ",l="الرجاء الموافقة على الشروط والأحكام",d="الرسالة";if(""===t||validateEmail(t))if(""===o||isMobileValid(o))if(""===a||isIDValid(a))if(e)if(t)if(a)if(o){if($(".accept_terms").is(":checked"))return!0;$(".responseTitle").html(d),$(".responseMsg").html(l),$("#openMsgPopupNoRedirect").click()}else $("#mobile").attr("data-original-title",i),$("#mobile").tooltip("show"),$("#mobile").focus();else $("#id_number").attr("data-original-title",i),$("#id_number").tooltip("show"),$("#id_number").focus();else $("#email").attr("data-original-title",i),$("#email").tooltip("show"),$("#email").focus();else $("#name").attr("data-original-title",i),$("#name").tooltip("show"),$("#name").focus();else $("#id_number").attr("data-original-title",r),$("#id_number").tooltip("show"),$("#id_number").focus();else $("#mobile").attr("data-original-title",s),$("#mobile").tooltip("show"),$("#mobile").focus();else $("#email").attr("data-original-title",n),$("#email").tooltip("show"),$("#email").focus()}function isMobileValid(e){var t=e;return!(!/^[0-9]{1,12}$/.test(t)||9!==t.length)}function isIDValid(e){var t=e;return!(!/^[0-9]{1,12}$/.test(t)||10!==t.length)}function showIdVersionField(e){$("input[name='license_no']").val(""),"68"==e||"243"==e?$("input[name='license_no']").attr("readonly",!0):$("input[name='license_no']").attr("readonly",!1),"68"==e?($("#sponsor_field").attr("disabled",!1),$("#sponsor_field").addClass("required-optional"),$("#sponsor_field").removeClass("readonly"),$(".sponsor").show()):($("#sponsor_field").attr("disabled",!0),$("#sponsor_field").removeClass("required-optional"),$("#sponsor_field").addClass("readonly"),$(".sponsor").hide()),"243"==e||"68"==e?($(".id_no").addClass("number"),$(".validate_license_number").addClass("number")):($(".id_no").removeClass("number"),$(".validate_license_number").removeClass("number")),"243"==e?$(".nationality").val("16"):$(".nationality").val("")}function main_search_with_filter(e){$(".moreRecordsDiv").show(),$(".noRecordFoundDiv").hide(),isAlreadyLoadMoreCalled=!1,isNoMoreResults=!1,offset=10,$(".shotingLink").children("ul").children("li").removeClass("active"),$(".shotingLink").children("ul").children("li").find('a[data-category-id="'+e+'"]').parent().addClass("active"),$(".loaderSpiner").show();var t=lang_base_url+"/main_search_with_filter";$.ajax({type:"POST",url:t,data:{category_id:e,language:lang},success:function(e){$(e).filter(".singleRow").length<10&&($(".moreRecordsDiv").hide(),isNoMoreResults=!0),$(".containsData").html(""),$(".containsData").html(e),$(".loaderSpiner").hide()}})}function validateBookingForm(){var e=!0;if($("input.required, select.required").each((function(){""==$(this).val()&&($(this).attr("data-original-title",required_message),$(this).tooltip("show"),e=!1)})),"eng"==lang)var t="Please accept the terms and conditions to proceed.",a="Message";else t="الرجاء الموافقة على الشروط والأحكام",a="الرسالة";return $(".accept_terms").is(":checked")||($(".responseTitle").html(a),$(".responseMsg").html(t),$("#openMsgPopupNoRedirect").click(),e=!1),e}function validateExtraInfoFormAfterBooking(){var e=!1;return $(".avoid_waiting").is(":checked")&&$("input.required-first, select.required-first").each((function(){""==$(this).val()?($(this).attr("data-original-title",required_message),$(this).tooltip("show"),e=!0):$(this).tooltip("hide")})),$(".want_to_register").is(":checked")&&$("input.required-second, select.required-second").each((function(){""==$(this).val()?($(this).attr("data-original-title",required_message),$(this).tooltip("show"),e=!0):$(this).tooltip("hide")})),!e}$(".phone, .phone-popup").intlTelInput({initialCountry:"sa",excludeCountries:["il"],nationalMode:!1,separateDialCode:!0,autoPlaceholder:"off",formatOnDisplay:!1,utilsScript:base_url+"/public/frontend/intTelInput/js/utils.js"}),$(document).ready((function(){$(document).on("focusout",".phone",(function(e){"sa"==$(this).intlTelInput("getSelectedCountryData").iso2?9!=$(this).val().length?($(this).css({border:"1px solid red"}),$(this).attr("data-original-title","This filed must contain only 9 characters"),$(this).tooltip("show"),$(".submit_btn").attr("disabled",!0)):($(this).tooltip("destroy"),$(this).tooltip("hide"),$(this).css({"border-color":"#afb0aa #e9eae4 #ebeae6","border-style":"solid","border-width":"1px"}),$(".submit_btn").attr("disabled",!1)):($(this).tooltip("destroy"),$(this).tooltip("hide"),$(this).css({"border-color":"#afb0aa #e9eae4 #ebeae6","border-style":"solid","border-width":"1px"}),$(".submit_btn").attr("disabled",!1));var t=$(".phone").intlTelInput("getNumber");$(".intTelNo").val(t)}))})),$(".phone").on("countrychange",(function(e,t){"sa"==$(this).intlTelInput("getSelectedCountryData").iso2?9!=$(this).val().length?($(this).css({border:"1px solid red"}),$(this).attr("data-original-title","This filed must contain only 9 characters"),$(this).tooltip("show"),$(".submit_btn").attr("disabled",!0)):($(this).tooltip("destroy"),$(this).tooltip("hide"),$(this).css({"border-color":"#afb0aa #e9eae4 #ebeae6","border-style":"solid","border-width":"1px"}),$(".submit_btn").attr("disabled",!1)):($(this).tooltip("destroy"),$(this).tooltip("hide"),$(this).css({"border-color":"#afb0aa #e9eae4 #ebeae6","border-style":"solid","border-width":"1px"}),$(".submit_btn").attr("disabled",!1));var a=$(".phone").intlTelInput("getNumber");$(".intTelNo").val(a)})),$(document).on("click",".changeLanguage",(function(e){$(".loaderSpiner").show();var t=$(this).attr("id").split("|"),a=t[0],o=t[1];$.ajax({type:"GET",url:lang_base_url+"/set_lang_session?lang="+a,data:{lang:a},async:!1,success:function(e){$(".loaderSpiner").hide(),window.location.href="eng"==a?base_url+"/en/"+o:base_url+"/"+o}})})),$(document).on("click","#webFullVersion",(function(e){$(".loaderSpiner").show();var t=$(this).attr("data-fullVersion");$.ajax({type:"GET",url:lang_base_url+"/set_mobile_full_version",data:{full_version:t},async:!1,success:function(e){location.reload()}})})),$(document).on("click","#serchhomeBtn",(function(e){if(is_mobile){if(""===$("#pickUpTime_hdn").val()||"2"!==$(".isDeliveryMode").val()&&"4"!==$(".isDeliveryMode").val()&&""===$("#dropOffTime_hdn").val()||"2"===$(".isDeliveryMode").val()&&(""===$("#book_for_hours").val()||"0"===$("#book_for_hours").val())||"4"===$(".isDeliveryMode").val()&&(""===$("#subscribe_for_months").val()||"0"===$("#subscribe_for_months").val()))return"2"===$(".isDeliveryMode").val()?""===$("#pickUpTime_hdn").val()?$("#time-select-alert").find("p").text("eng"===lang?"Please select Pick up time":"نرجو تحديد وقت التسليم"):""!==$("#book_for_hours").val()&&"0"!==$("#book_for_hours").val()||$("#time-select-alert").find("p").text("eng"===lang?"Please select booking hours":"الرجاء تحديد ساعات الحجز"):"4"===$(".isDeliveryMode").val()?""===$("#pickUpTime_hdn").val()?$("#time-select-alert").find("p").text("eng"===lang?"Please select Pick up time":"نرجو تحديد وقت التسليم"):""!==$("#subscribe_for_months").val()&&"0"!==$("#subscribe_for_months").val()||$("#time-select-alert").find("p").text("eng"===lang?"Please select subscription months":"الرجاء تحديد ساعات الحجز"):$("#time-select-alert").find("p").text("eng"===lang?"Please select Pick up and Drop off time":"اختار وقت موقع الاستلام و التسليم"),$("#time-select-alert").modal("show"),!1;$(".serFormArea").submit()}else if(!0===validateGenericForm())if(1==$(".allIsOkForPickup").val()&&1==$(".allIsOkForDropoff").val())$(".serFormArea").submit();else{if("eng"==lang){var t="Error";if(0==$(".allIsOkForPickup").val()&&0==$(".allIsOkForDropoff").val())var a="Sorry but our delivery services are not available for the selected pickup and return location.";else if(0==$(".allIsOkForPickup").val()&&1==$(".allIsOkForDropoff").val())a="Sorry but our delivery services are not available for the selected pickup location.";else if(1==$(".allIsOkForPickup").val()&&0==$(".allIsOkForDropoff").val())a="Sorry but our delivery services are not available for the selected return location."}else{t="خطأ";if(0==$(".allIsOkForPickup").val()&&0==$(".allIsOkForDropoff").val())a="عفوا، خدمة التوصيل غير متاحة للمكان المختار";else if(0==$(".allIsOkForPickup").val()&&1==$(".allIsOkForDropoff").val())a="عفوا، خدمة التوصيل غير متاحة للمكان المختار";else if(1==$(".allIsOkForPickup").val()&&0==$(".allIsOkForDropoff").val())a="عفوا، خدمة التوصيل غير متاحة للمكان المختار"}$(".responseTitle").html(t),$(".responseMsg").html(a),$("#openMsgPopupNoRedirect").click()}})),$(document).on("submit",".getYourCarForm",(function(e){if(void 0!==$(".accept_terms").val()){if($(".accept_terms").is(":checked"))return!0;if("eng"==lang)var t="Please accept the terms and conditions to proceed.",a="Message";else t="الرجاء الموافقة على الشروط والأحكام",a="الرسالة";return $(".responseTitle").html(a),$(".responseMsg").html(t),$("#openMsgPopupNoRedirect").click(),!1}})),$(document).on("click",".getCarGuest",(function(e){if(void 0!==$(".accept_terms").val()){if(!$(".accept_terms").is(":checked")){if("eng"==lang)var t="Please accept the terms and conditions to proceed.",a="Message";else t="الرجاء الموافقة على الشروط والأحكام",a="الرسالة";return $(".responseTitle").html(a),$(".responseMsg").html(t),$("#openMsgPopupNoRedirect").click(),!1}$("#model-login").modal("show")}})),$(document).on("submit",".signup_form_new_user",(function(e){if(1==validateForm()){var t=$(this),a=new FormData(this),o=t.attr("method"),i=t.attr("action");$(".loaderSpiner").show();var n=$("#email_required_for_validation").val(),r=$("#id_no_required_for_validation").val();$(".id_type").val();$.ajax({type:"POST",url:lang_base_url+"/validateEmailAndIdNo",dataType:"json",data:{email:n,id_no:r},success:function(e){if(0==e.status){if("eng"==lang)var t="Error";else t="خطأ";$(".responseTitle").html(t),$(".responseMsg").html(e.message),$(".loaderSpiner").hide(),$("#openMsgPopupNoRedirect").click()}else $.ajax({type:o,url:i,dataType:"json",data:a,cache:!1,contentType:!1,processData:!1,success:function(e){if(1==e.something_went_wrong){if("eng"==lang)var t="Error";else t="خطأ";$(".responseTitle").html(t),$(".responseMsg").html(e.error_message),$(".loaderSpiner").hide(),$("#openMsgPopupNoRedirect").click()}else $(".loaderSpiner").hide(),$(".responseTitle").html(e.title),$(".responseMsg").html(e.message),""!=e.redirectURL?(redUrl=lang_base_url+"/"+e.redirectURL,$("#OKBtn").attr("href",redUrl),$("#openMsgPopupRedirect").click()):$("#openMsgPopupNoRedirect").click()}})}})}})),$(".contact_us_frm").submit((function(e){e.preventDefault(),$(".loaderSpiner").show();var t=$(this).attr("action");$.ajax({type:"POST",dataType:"json",data:new FormData(this),url:t,cache:!1,contentType:!1,processData:!1,success:function(e){if("eng"==lang)var t="Success",a="Error";else t="بنجاح",a="خطأ";$(".loaderSpiner").hide(),1==e.captcha&&e.success?($(".responseTitle").html(t),$(".responseMsg").html(e.message),$("#openMsgPopupNoRedirect").click(),$(".contact_us_frm")[0].reset()):($(".responseTitle").html(a),$(".responseMsg").html(e.message),$("#openMsgPopupNoRedirect").click())}})})),$(document).on("submit",".change_points_form",(function(){if(!validationPoints_form())return!1;$(".loaderSpiner").show(),$form=$(this),$.ajax({type:"POST",url:$form.attr("action"),data:new FormData(this),dataType:"json",cache:!1,contentType:!1,processData:!1,success:function(e){if("eng"===lang)var t="Success",a="Error";else t="بنجاح",a="خطأ";$(".loaderSpiner").hide(),!0===e.captcha&&!0===e.success?($(".responseTitle").html(t),$(".responseMsg").html(e.message),$("#openMsgPopupNoRedirect").click(),$(".change_points_form")[0].reset()):($(".responseTitle").html(a),$(".responseMsg").html(e.message),$("#openMsgPopupNoRedirect").click())}})})),$(".careerForm").submit((function(e){e.preventDefault(),$(".loaderSpiner").show();var t=$(this).attr("action");$.ajax({type:"POST",dataType:"json",data:new FormData(this),url:t,cache:!1,contentType:!1,processData:!1,success:function(e){if($(".loaderSpiner").hide(),"eng"==lang)var t="Success",a="Error";else t="بنجاح",a="خطأ";1==e.captcha&&e.success?($(".responseTitle").html(t),$(".responseMsg").html(e.message),$("#openMsgPopupNoRedirect").click(),$(".careerForm")[0].reset()):($(".responseTitle").html(a),$(".responseMsg").html(e.message),$("#openMsgPopupNoRedirect").click())}})})),$(document).ready((function(){$(document).on("keydown",".number",(function(e){46==e.keyCode||8==e.keyCode||107==e.keyCode||(9!==e.keyCode&&(e.keyCode<48||e.keyCode>57)&&(e.keyCode<96||e.keyCode>106)||""==$.trim($(this).val())&&48==e.keyCode)&&e.preventDefault()}))})),$(document).on("submit","#login",(function(e){var t=!0;if(""==$("#loginUsername").val()?($("#loginUsername").attr("data-original-title",required_message),$("#loginUsername").tooltip("show"),t=!1):$("#loginUsername").tooltip("hide"),""==$("#loginPassword").val()?($("#loginPassword").attr("data-original-title",required_message),$("#loginPassword").tooltip("show"),t=!1):$("#loginPassword").tooltip("hide"),1==t){$(".loaderSpiner").show();var a=$("#redirect_segment").val(),o=$(this),i=o.attr("method"),n=o.attr("action");$.ajax({type:i,url:n,dataType:"json",data:new FormData(this),cache:!1,contentType:!1,processData:!1,success:function(e){if(!0===e.something_went_wrong){if("eng"===lang)var t="Error";else t="خطأ";if("eng"===lang)var o="Sorry we can't log you into the system.";else o="عذرا لا يمكن إنشاء حساب";$(".responseTitle").html(t),$(".responseMsg").html(o),$(".loaderSpiner").hide(),$("#openMsgPopupNoRedirect").click()}else!1===e.status?($(".responseTitle").html(e.title),$(".responseMsg").html(e.message),$(".loaderSpiner").hide(),$("#openMsgPopupNoRedirect").click()):!0===e.is_humanLess?window.location.href=lang_base_url+"/"+a+"/"+e.bookingIDGetCar:!0===e.is_super_corporate?($("#is_super_corporate").val("1"),$("#containsLoginDDB").removeClass("open"),$(".loaderSpiner").hide(),$("#btnCorporateCompanies").click()):window.location.href=lang_base_url+"/my-profile"}})}})),$(document).on("submit","#loginOnPayment",(function(e){var t=!0;if(""==$(this).find("#loginUsernameOnPayment").val()?($(this).find("#loginUsernameOnPayment").attr("data-original-title",required_message),$(this).find("#loginUsernameOnPayment").tooltip("show"),t=!1):$(this).find("#loginUsernameOnPayment").tooltip("hide"),""==$(this).find("#loginPasswordOnPayment").val()?($(this).find("#loginPasswordOnPayment").attr("data-original-title",required_message),$(this).find("#loginPasswordOnPayment").tooltip("show"),t=!1):$(this).find("#loginPasswordOnPayment").tooltip("hide"),1==t){$(".loaderSpiner").show();var a=$(this),o=a.attr("method"),i=a.attr("action");$.ajax({type:o,url:i,dataType:"json",data:new FormData(this),cache:!1,contentType:!1,processData:!1,success:function(e){if(1==e.something_went_wrong){if("eng"==lang)var t="Error";else t="خطأ";if("eng"==lang)var a="Sorry we can't log you into the system";else a="عذرا لا يمكن إنشاء حساب";$(".responseTitle").html(t),$(".responseMsg").html(a),$(".loaderSpiner").hide(),$("#openMsgPopupNoRedirect").click()}else 0==e.status?($(".responseTitle").html(e.title),$(".responseMsg").html(e.message),$(".loaderSpiner").hide(),$("#openMsgPopupNoRedirect").click()):1==e.has_profile?window.location.href=lang_base_url+"/payment":window.location.href=lang_base_url}})}})),$(document).on("submit",".custom_submit",(function(e){var t=$(this),a=t.attr("method"),o=t.attr("action");$(".loaderSpiner").show(),$.ajax({type:a,url:o,dataType:"json",data:new FormData(this),cache:!1,contentType:!1,processData:!1,success:function(e){if("eng"==lang)var t="Success",a="Error";else t="بنجاح",a="خطأ";$(".loaderSpiner").hide(),0==e.status?($(".responseTitle").html(a),$(".responseMsg").html(e.message),$("#openMsgPopupNoRedirect").click()):($(".responseTitle").html(t),$(".responseMsg").html(e.message),$("#openMsgPopupNoRedirect").click())}})})),$(document).on("submit",".changePassword",(function(e){$(".password").val(),$(".confirm_password").val();if(""==$(".password").val()?($(".password").attr("data-original-title",required_message),$(".password").tooltip("show")):$(".password").tooltip("hide"),""==$(".confirm_password").val()?($(".confirm_password").attr("data-original-title",required_message),$(".confirm_password").tooltip("show")):$(".confirm_password").tooltip("hide"),""!=$(".password").val()&&""!=$(".confirm_password").val()){var t=$(this),a=t.attr("method"),o=t.attr("action");$.ajax({type:a,url:o,dataType:"json",data:new FormData(this),cache:!1,contentType:!1,processData:!1,success:function(e){1==e.status?($(".responseTitle").html(e.title),$(".responseMsg").html(e.message),redUrl=lang_base_url+"/home",$("#OKBtn").attr("href",redUrl),$("#openMsgPopupRedirect").click()):($(".responseTitle").html(e.title),$(".responseMsg").html(e.message),$("#openMsgPopupNoRedirect").click())}})}})),$(document).on("submit",".edit_profile_form",(function(e){if(returnVal=!0,$("input.required, select.required").each((function(){$(this).parent("div").is(":visible")&&""==$(this).val()&&($(this).attr("data-original-title",required_message),$(this).tooltip("show"),returnVal=!1)})),1==returnVal){$(".loaderSpiner").show();var t=$(this),a=t.attr("method"),o=t.attr("action");$.ajax({type:a,url:o,dataType:"json",data:new FormData(this),cache:!1,contentType:!1,processData:!1,success:function(e){if("eng"==lang)var t="Success",a="Error";else t="بنجاح",a="خطأ";$(".loaderSpiner").hide(),1==e.status?($(".responseTitle").html(t),$(".responseMsg").html(e.message),""!==e.redirectURL?(redUrl=lang_base_url+"/"+e.redirectURL,$("#OKBtn").attr("href",redUrl),$("#openMsgPopupRedirect").click()):$("#openMsgPopupNoRedirect").click()):($(".responseTitle").html(a),$(".responseMsg").html(e.message),$("#openMsgPopupNoRedirect").click())}})}})),$(document).on("submit",".edit_corporate_profile_form",(function(e){if(returnVal=!0,$("input.required, select.required").each((function(){$(this).parent("div").is(":visible")&&""==$(this).val()&&($(this).attr("data-original-title",required_message),$(this).tooltip("show"),returnVal=!1)})),1==returnVal){$(".loaderSpiner").show();var t=$(this),a=t.attr("method"),o=t.attr("action");$.ajax({type:a,url:o,dataType:"json",data:new FormData(this),cache:!1,contentType:!1,processData:!1,success:function(e){if("eng"==lang)var t="Success",a="Error";else t="بنجاح",a="خطأ";$(".loaderSpiner").hide(),1==e.status?($(".responseTitle").html(t),$(".responseMsg").html(e.message),""!==e.redirectURL?(redUrl=lang_base_url+"/"+e.redirectURL,$("#OKBtn").attr("href",redUrl),$("#openMsgPopupRedirect").click()):$("#openMsgPopupNoRedirect").click()):($(".responseTitle").html(a),$(".responseMsg").html(e.message),$("#openMsgPopupNoRedirect").click())}})}})),$(document).on("submit","#mainSearchForm",(function(e){if($("#mainSearchForm input.required").each((function(){""==$(this).val()?($(this).attr("data-original-title",required_message),$(this).tooltip("show"),returnVal=!1):($(this).tooltip("hide"),returnVal=!0)})),1==returnVal){var t=$(this),a=t.attr("method"),o=t.attr("action");$.ajax({type:a,url:o,dataType:"json",data:new FormData(this),cache:!1,contentType:!1,processData:!1,success:function(e){if("eng"==lang)var t="Success",a="Error";else t="بنجاح",a="خطأ";1==e.status?($(".responseTitle").html(t),$(".responseMsg").html(e.message),""!==e.redirectURL?(redUrl=lang_base_url+"/"+e.redirectURL,$("#OKBtn").attr("href",redUrl),$("#openMsgPopupRedirect").click()):$("#openMsgPopupNoRedirect").click()):($(".responseTitle").html(a),$(".responseMsg").html(e.message),$("#openMsgPopupNoRedirect").click())}})}})),$(document).on("click",".extraChargesCB",(function(e){$(".extraChargesCB").parents(".deFaultRow").removeClass("active");var t=$(this).attr("id");"ldwIC"===t?$("#ldwICP").prop("checked",!1):"ldwICP"===t&&$("#ldwIC").prop("checked",!1);var a=parseFloat($("#rent_multip_day_hdn_help").val()),o=parseFloat($("#vat_percentage").val()),i=0;$(".extraChargesCB:checked").each((function(){$(this).parents(".deFaultRow").addClass("active"),a+=parseFloat($(this).data("total_with_days")),i+=parseInt($(this).data("total_with_days"))}));var n=o/100*a;$(".total_rent").val(parseFloat(a).toFixed(2)),$(".totalPrice").html(parseFloat(a).toFixed(2)),$("#extrasFieldHere").html(parseInt(i).toFixed(2)),$(".totalPriceWithVat").html(parseFloat(a+n).toFixed(2)),$(".totalPriceWithVatInput").html(parseFloat(a+n).toFixed(2)),$("#hasVat").html(parseFloat(n).toFixed(2)),$("#vat").val(parseFloat(n).toFixed(2))})),$(document).on("click",".bookNowBtn",(function(){var e=!0;if("eng"==lang)var t="Please accept the terms and conditions to proceed.",a="Message";else t="الرجاء الموافقة على الشروط والأحكام",a="الرسالة";if($(".bookNowForm input.required, .bookNowForm select.required").each((function(){""==$(this).val()&&($(this).attr("data-original-title",required_message),$(this).tooltip("show"),this.scrollIntoView(!1),e=!1)})),$(".accept_terms").is(":checked")||($(".responseTitle").html(a),$(".responseMsg").html(t),$("#openMsgPopupNoRedirect").click(),this.scrollIntoView(!1),e=!1),$("input[name=payment_method]:checked").length>0||(e=!1),!0===e){$(".loaderSpiner").show();var o=$(".customer_email").val(),i=$(".customer_id_no").val(),n=lang_base_url+"/checkIfSurveyPendingToFill";$.ajax({type:"POST",url:n,dataType:"JSON",data:{email:o,id_no:i,last_segment:last_segment},success:function(e){if(!0===e.status)$(".loaderSpiner").hide(),$("#openSurveyPopup").click();else{var t=$("#email_required_for_validation").val(),a=$("#id_no_required_for_validation").val(),o=$(".id_type").val(),i=$("#old_email_address").val();$(".loaderSpiner").show(),$.ajax({type:"POST",url:lang_base_url+"/checkIfUserBlacklistedOrSimahBlock",dataType:"json",data:{id_no:a,id_type:o},success:function(e){if(0==e.status){if("eng"==lang)var o="Error";else o="خطأ";$(".responseTitle").html(o),$(".responseMsg").html(e.message),$(".loaderSpiner").hide(),$("#openMsgPopupNoRedirect").click()}else $.ajax({type:"POST",url:lang_base_url+"/validateEmailAndIdNo",dataType:"json",data:{email:t,id_no:a},success:function(e){if(0==e.status){if("eng"==lang)var o="Error";else o="خطأ";$(".responseTitle").html(o),$(".responseMsg").html(e.message),$(".loaderSpiner").hide(),$("#openMsgPopupNoRedirect").click()}else""==i||""!=i&&t!=i?$.ajax({type:"POST",url:lang_base_url+"/validateLoginEmail",dataType:"json",data:{email:t,id_no:a},success:function(e){0==e.status?($(".responseTitle").html("Warning"),$(".responseMsg").html(e.message),$(".loaderSpiner").hide(),$("#openUserEmailMsgPopup").click()):($(".bookNowForm").removeAttr("onsubmit"),$(".bookNowForm").submit())}}):($(".bookNowForm").removeAttr("onsubmit"),$(".bookNowForm").submit())}})}})}}})}})),$(document).on("click","#openUserEmailMsgPopupSubmitBtn",(function(e){$(".loaderSpiner").show(),$(".bookNowForm").removeAttr("onsubmit"),$(".bookNowForm").submit()})),$(document).on("submit",".save_extra_infor_after_reservation",(function(e){if(1==validateExtraInfoFormAfterBooking()){$(".loaderSpiner").show();var t=$(this),a=t.attr("method"),o=t.attr("action");$.ajax({type:a,url:o,dataType:"json",data:new FormData(this),cache:!1,contentType:!1,processData:!1,success:function(e){$(".loaderSpiner").hide(),$(".responseTitle").html(e.title),$(".responseMsg").html(e.message),""!=e.redirectURL?(redUrl=lang_base_url+"/"+e.redirectURL,$("#OKBtn").attr("href",redUrl),$("#openMsgPopupRedirect").click()):$("#openMsgPopupNoRedirect").click()}})}}));var apply_cancel_charges="",cancel_booking_id=0;function cancelBooking(e){cancel_booking_id=e,$.ajax({type:"GET",url:lang_base_url+"/getServerTime",dataType:"json",data:{bookingId:e},cache:!1,success:function(e){if(apply_cancel_charges=e.apply_cancel_charges,"eng"==lang)var t="Message";else t="الرسالة";if(1==e.allowed)$(".cancelTitle").html(t),$(".cancelMsg").html(e.message),$("#cancelBookingConfirmCharge").click();else{if("eng"==lang)var a="Sorry";else a="معذرة";$(".responseTitle").html(a),$(".responseMsg").html(e.message),$("#openMsgPopupNoRedirect").click()}}})}function cancelBookingFun(e,t){var a=lang_base_url+"/cancelBooking",o=$("#cancellation_reason").val();$.ajax({type:"POST",url:a,dataType:"json",data:{id:e,apply_cancel_charges:t,cancellation_reason:o},cache:!1,success:function(t){if($(".close").click(),$(".responseTitle").html(t.title),$(".responseMsg").html(t.updateMsg),t.isUpdate){if($.ajax({type:"GET",url:base_url+"/cronjob/setCancelledBookingCollectionCronJob",cache:!1,success:function(e){}}),"eng"==lang);else;if("eng"==lang)var a="CANCELLED";else a="ملغي";$(".loaderSpiner").hide(),$("#cancelBookingForm").modal("hide"),$("#openMsgPopupNoRedirect").click(),window.stop(),$("#statusMsg_"+e).html(a),$("#myBookingRow_"+e).addClass("cancelled"),$("#bCancelBtn_"+e).remove()}}})}function validateCreateUserForm(){var e=!1;return $("#create_individual_login input.required, #create_individual_login select.required").each((function(){""==$(this).val()?($(this).attr("data-original-title",required_message),$(this).tooltip("show"),e=!0):$(this).tooltip("hide")})),!e}function subscribe_news_letter(e){if($(".loaderSpiner").show(),"eng"==lang)var t="Error",a="Please enter the email address",o="Please enter a valid email address";else t="خطأ",a="الرجاء إدخال البريد الإلكترونى",o="الرجاء إدخال بريد إلكترونى صحيح";if(""==e)return $(".loaderSpiner").hide(),$(".responseTitle").html(t),$(".responseMsg").html(a),$("#openMsgPopupNoRedirect").click(),!1;if(!validateEmail(e))return $(".loaderSpiner").hide(),$(".responseTitle").html(t),$(".responseMsg").html(o),$("#openMsgPopupNoRedirect").click(),!1;var i=$(".newsLetter").attr("action");$.ajax({type:"POST",url:i,dataType:"json",data:{news_letter:e},success:function(e){$(".loaderSpiner").hide(),e.success,$(".responseTitle").html(e.title),$(".responseMsg").html(e.message),$("#openMsgPopupNoRedirect").click()}})}function validateEmail(e){var t=e.indexOf("@"),a=e.lastIndexOf(".");return!(t<1||a<t+2||a+2>=e.length)}$(document).on("click",".cancelBookingBtnConfirmCharge",(function(e){return e.preventDefault(),$("#cancelBookingPopupCharge").modal("hide"),$("#cancelBookingReasonPopup").modal("show"),!1})),$(document).on("click",".cancelBookingReasonBtn",(function(e){if(e.preventDefault(),""!=$("#cancellation_reason").val())return $("#cancellation_reason").tooltip("hide"),$("#cancelBookingReasonPopup").modal("hide"),$(".loaderSpiner").show(),$.ajax({type:"GET",url:lang_base_url+"/cancelBookingVerification?cancelBookingId="+cancel_booking_id,dataType:"json",cache:!1,async:!1,success:function(e){return $(".loaderSpiner").hide(),!0===e.status?($(".cancelSmsVerification").html(e.message),$("#cancelBookingPopup").click(),window.stop(),!1):($(".smsVerification").html(e.message),$("#openSMSVerifyPopup").click(),window.stop(),!1)}}),!1;$("#cancellation_reason").attr("data-original-title",required_message),$("#cancellation_reason").tooltip("show")})),$(".cancelBookingBtnConfirmCharge_bk").click((function(e){})),$(document).on("submit",".cancelBookingverification",(function(){$(".loaderSpiner").show();var e=lang_base_url+"/verifySmsCheck",t=$(this),a=t.attr("method");$.ajax({type:a,url:e,dataType:"json",data:t.serialize(),cache:!1,contentType:!1,processData:!1,success:function(e){1==e.status?cancelBookingFun(cancel_booking_id,apply_cancel_charges):($(".loaderSpiner").hide(),$(".cancelSmsVerification").html(e.message))}})})),$(document).on("submit",".corporateCompaniesForm",(function(e){e.preventDefault(),$(".loaderSpiner").show();var t=$(this),a=t.attr("action"),o=t.attr("method"),i=$("#super_corporate_id").val(),n=$("#corporate_company_id").val();""===n?($(".loaderSpiner").hide(),$("#superCorpModal").modal("show")):$.ajax({type:o,url:a,dataType:"json",data:{super_corporate_id:i,corporate_company_id:n},cache:!1,success:function(e){!0===e.status?window.location.href=lang_base_url+"/home":($(".loaderSpiner").hide(),alert("Error"))}})})),$(document).on("submit","#create_individual_login",(function(e){if(1==validateCreateUserForm()){$(".loaderSpiner").show();var t=$(this),a=t.attr("method"),o=t.attr("action");$.ajax({type:a,url:o,dataType:"json",data:new FormData(this),cache:!1,contentType:!1,processData:!1,success:function(e){1==e.something_went_wrong?window.location.href=lang_base_url+"/something-went-wrong":($(".loaderSpiner").hide(),0==e.status?($(".responseTitle").html(e.title),$(".responseMsg").html(e.message),$("#openMsgPopupNoRedirect").click()):($(".smsVerification").html(e.message),$("#openSMSVerifyPopup").click()))}})}})),$(document).on("submit",".verificationCheck",(function(){var e=lang_base_url+"/verifySmsCheck";$(".loaderSpiner").show();var t=$(this),a=t.attr("method");$.ajax({type:a,url:e,dataType:"json",data:t.serialize(),cache:!1,contentType:!1,processData:!1,success:function(e){$(".loaderSpiner").hide(),1==e.status?(redUrl=lang_base_url+"/"+e.redirectURL,window.location.href=redUrl):$(".smsVerification").html(e.message)}})})),$(document).on("click",".resendVerifyCode",(function(){var e=0;""!=cancel_booking_id&&(e=cancel_booking_id),$(".loaderSpiner").show(),$.ajax({type:"GET",url:lang_base_url+"/resendVerifyCode",dataType:"json",data:{cancelBookingId:e},cache:!1,success:function(e){$(".loaderSpiner").hide(),e.status&&($(".responseMsg").html(e.message),$(".smsVerification").html(e.message))}})})),$(document).on("click","#applyCouponCodeBtn",(function(e){if(""==$("#couponCodeField").val())$("#couponCodeField").attr("data-original-title",required_message),$("#couponCodeField").tooltip("show");else{$("#couponCodeField").tooltip("hide"),$(".loaderSpiner").show();var t=$("#couponCodeField").val(),a=$('[name="id_no"]').val();$.ajax({type:"POST",url:lang_base_url+"/applyCoupon",dataType:"json",data:{coupon:t,id_no:a},success:function(e){if($(".loaderSpiner").hide(),1==e.status)$("#promotion_id").val(e.promotion_id),$("#showTotalAmount").html(e.total_amount),$("#discount_amount_per_day").val(e.promo_discount_amount),$("#rent_per_day_span").html(e.rent_per_day),$("#rent_m_days_span").html(e.rent_m_days),$("#total_rent_after_discount_on_promo").val(e.total_amount_after_discount),$(".discountAutoAppliedMsg").hide(),$("#couponCodeField").hide(),$("#applyCouponCodeBtn").hide(),$(".discount_on_promo_auto").hide(),0==e.is_promo_applied_for_extras&&$(".discount_on_promo_code").show(),$(".codeApproved").show(),$(".discount").html(e.discount_multipl_days),$("#total_per_1_day").html(e.total_per_1_day),$("#total_amount").html(e.total_amount),$("#showTotalAmount").html(e.total_amount_with_vat),$(".TotalAmountWithVatForMobile").html(e.total_to_be_paid_used_for_mobile),$(".TotalAmountWithVatForMobileWithDays").html(e.total_to_be_paid_with_days_used_for_mobile),$("#promoCodeHere").html(t),$("#show_vat_applied").html(e.vat_after_promo_apply),$(".redeemApplySection").hide();else{var a="eng"==lang?"Error":"خطأ",o="";o=0==e.apply_status?"eng"==lang?"The coupon you have entered is not applied. You already have greater discount.":"لا يمكن استخدام الرمز الترويجي المدخل لانه لديك خصم اكبر من خصم الرمز":e.message?e.message:"eng"==lang?"The coupon you have entered in invalid.":"رقم القسيمة غير صحيح",$(".responseTitle").html(a),$(".responseMsg").html(o),$("#openMsgPopupNoRedirect").click()}}})}})),$(document).on("click",".manageBookingFromHome",(function(e){if(""==$(this).siblings(".booking_reference_no_for_home").val())$(this).siblings(".booking_reference_no_for_home").attr("data-original-title",required_message),$(this).siblings(".booking_reference_no_for_home").tooltip("show");else{$(this).siblings(".booking_reference_no_for_home").tooltip("hide");var t=$(this).siblings(".booking_reference_no_for_home").val();$.ajax({type:"POST",url:lang_base_url+"/checkIfBookingExistWithRefNo",dataType:"json",data:{booking_ref_no:t},success:function(e){$(".loaderSpiner").hide(),1==e.status?($("#resCode").val(t),$("#openModalWithForm").click()):($(".responseTitle").html(e.title),$(".responseMsg").html(e.message),$("#openMsgPopupNoRedirect").click())}})}})),$(document).on("click","#manageBookingSecondStep",(function(e){if(""==$("#email_field_for_manage").val())$("#email_field_for_manage").attr("data-original-title",required_message),$("#email_field_for_manage").tooltip("show");else{$("#email_field_for_manage").tooltip("hide");var t=$("#email_field_for_manage").val(),a=$("#resCode").val();$.ajax({type:"POST",url:lang_base_url+"/checkIfBookingExistWithRefNoStep2",dataType:"json",data:{booking_ref_no:a,email_field_for_manage:t},success:function(e){$(".loaderSpiner").hide(),1==e.status?window.location.href=lang_base_url+"/manage-booking/"+e.record_id:($(".responseTitle").html(e.title),$(".responseMsg").html(e.message),$("#openMsgPopupNoRedirect").click())}})}}));var typingTimer,isAlreadyLoadMoreCalled=!1,isNoMoreResults=!1,offset=10;function fleet_serch_cat_filter(e,t,a){$(".moreRecordsDiv").show(),$(".noRecordFoundDiv").hide(),isAlreadyLoadMoreCalled=!1,isNoMoreResults=!1,offset=10,$(".shotingLink").children("ul").children("li").removeClass("active"),$(".shotingLink").children("ul").children("li").find('a[data-categoryid="'+e+'"]').parent().addClass("active"),setCatIdInHiddenField(),$(".loaderSpiner").show();var o=$(".fleetSerBar").serialize(),i=lang_base_url+"/search_cars_with_all_fields";$.ajax({type:"POST",url:i,data:o,success:function(e){$(e).filter(".singleRow").length<10&&($(".moreRecordsDiv").hide(),isNoMoreResults=!0),$(".containsData").html(""),$(".containsData").html(e),!1!==a&&$("#fleet_text").val(a),$(".loaderSpiner").hide()}})}function search_cars_with_all_fields(){$(".loadMore").hide(),isAlreadyLoadMoreCalled=!0,isNoMoreResults=!0,offset=10,setCatIdInHiddenField(),$(".loaderSpiner").show();var e=$(".fleetSerBar").serialize(),t=lang_base_url+"/search_cars_with_all_fields";$.ajax({type:"POST",url:t,data:e,success:function(e){$(e).filter(".singleRow").length>=10&&($(".loadMore").show(),isAlreadyLoadMoreCalled=!1,isNoMoreResults=!1),$(".containsData").html(""),$(".containsData").html(e),$(".loaderSpiner").hide()}})}function setCatIdInHiddenField(){$(".shotingLink ul li").each((function(){if($(this).hasClass("active")){var e=$(this).children("a").data("categoryid");$("#searchcatId").val(e)}}))}function setBranchIdInHiddenField(e){$("#searchBranchId").val(e),search_cars_with_all_fields()}function loadMoreCars(){if(!isAlreadyLoadMoreCalled&&!isNoMoreResults){$(".moreRecordsDiv").show(),isAlreadyLoadMoreCalled=!0,$(".loaderSpiner").show();var e=$(".fleetSerBar").serializeArray();e.push({name:"offset",value:offset}),$.ajax({type:"POST",url:lang_base_url+"/fleetPagination",data:e,dataType:"json",success:function(e){$(".loaderSpiner").hide(),""!=e?($(".fleetLoadMorePage").append(e),offset+=10):($(".moreRecordsDiv").hide(),$(".noRecordFoundDiv").show(),isNoMoreResults=!0),isAlreadyLoadMoreCalled=!1}})}}function loadMoreSearchCars(){if(!isAlreadyLoadMoreCalled&&!isNoMoreResults){$(".moreRecordsDiv").show(),isAlreadyLoadMoreCalled=!0,$(".loaderSpiner").show();var e=$(".serFormArea").serializeArray(),t="";$(".shotingLink ul li").each((function(){$(this).hasClass("active")&&(t=$(this).children("a").data("category-id"))})),is_mobile&&(t=$(".catId_mob_search").find(":selected").val()),e.push({name:"offset",value:offset}),e.push({name:"cat_id",value:t}),$.ajax({type:"POST",url:lang_base_url+"/searchCarsPagination",data:e,dataType:"json",success:function(e){$(".loaderSpiner").hide(),""!=e?($(".searchLoadMorePage").append(e),offset+=10):($(".moreRecordsDiv").hide(),$(".noRecordFoundDiv").show(),isNoMoreResults=!0),isAlreadyLoadMoreCalled=!1,$('input[name="show_available_cars_only"]').is(":checked")?$(".sold_out").hide():$(".sold_out").show()}})}}function checkIfFieldEmpty(e){return""==e?($(".id_no_for_loyalty").attr("data-original-title",required_message),$(".id_no_for_loyalty").tooltip("show"),!1):($(".id_no_for_loyalty").tooltip("hide"),!0)}function siteUnderMaintenance(){$("#openSiteUnderMaintenancePopUp").click()}function isEmail(e){return/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(e)}function validateIDNoField(e){}function hideShowLicenseField(e){"female"==e?($(".license_no").removeClass("required"),$(".license_no_for_hide_show").hide()):($(".license_no").addClass("required"),$(".license_no_for_hide_show").show())}"fleet"==page&&$(window).scroll((function(){$(window).scrollTop()+$(window).height()>$(document).height()-50&&loadMoreCars()})),"search-results"==page&&$(window).scroll((function(){$(window).scrollTop()+$(window).height()>$(document).height()-50&&loadMoreSearchCars()})),$(document).on("submit","#my_bookings_filtering",(function(e){var t=$(this),a=t.attr("method"),o=t.attr("action");$(".loaderSpiner").show(),$.ajax({type:a,url:o,dataType:"json",data:new FormData(this),cache:!1,contentType:!1,processData:!1,success:function(e){$("#new_records").html(e.html),$("#old_records").hide(),$("#new_records").show(),$(".loaderSpiner").hide()}})})),$(document).on("click","#reset_results",(function(e){$("#key_name").val(""),$("#date").val(""),$("#old_records").show(),$("#new_records").hide()})),$(document).on("click",".applyUserLoyaltyBtn",(function(e){var t=$(".id_no_for_loyalty").val(),a="",o="";1==checkIfFieldEmpty(t)&&($(".loaderSpiner").show(),$.ajax({type:"POST",url:lang_base_url+"/checkIfIdNoExist",dataType:"json",data:{user_id_no:t},success:function(e){0==e.status?("eng"==lang?(a="Error",o="Sorry. We could not find this ID no in our system."):(a="خطأ",o="لم يتم العثور على سائق بالهوية المدخلة"),$(".loaderSpiner").hide(),$(".responseTitle").html(a),$(".responseMsg").html(o),$("#openMsgPopupNoRedirect").click()):$.get(base_url+"/cronjob/loyaltySyncCronJob?from_mobile=1&user_id_no="+t,(function(e){$(".loaderSpiner").hide(),$(".userLoyaltyApplyForm").submit()}))}}))})),$(document).on("keyup","#email_required_for_validation",(function(e){$("#emailLoginMsg").show()})),$(document).on("click","#openLoginDDB",(function(e){$(".hasDropEd").removeClass("open"),$("#containsLoginDDB").addClass("open")})),$(document).ready((function(){"booked"!=last_segment&&"booking-done"!=last_segment||function(e){if(void 0===e)throw new Error("window is undefined");e.onhashchange=function(){"!"!==e.location.hash&&(e.location.hash="!")},e.onload=function(){e.location.href+="#",e.setTimeout((function(){e.location.href+="!"}),50),document.body.onkeydown=function(e){var t=e.target.nodeName.toLowerCase();8===e.which&&"input"!==t&&"textarea"!==t&&e.preventDefault(),e.stopPropagation()}}}(window)})),$(document).on("click",".btn-booking",(function(e){var t=$(this).data("branch_id");$.ajax({type:"POST",url:lang_base_url+"/redirectToBookingPage",dataType:"json",data:{lang:lang,branch_id:t},success:function(e){window.location.href=lang_base_url+"/book-car"}})})),$(document).on("focusout",".checkEmailValid",(function(e){var t=$(this).val();""!=t&&(isEmail(t)?($(this).css({"border-color":"#afb0aa #e9eae4 #ebeae6","border-style":"solid","border-width":"1px"}),$(".submit_btn").attr("disabled",!1)):($(this).css({border:"1px solid red"}),$(".submit_btn").attr("disabled",!0)))}));var map,my_center,marker,doneTypingInterval=500;function filterSearchAreaFromFieldForPickup(){var e,t=[],a=[];e=$("#myInputFromForPickup").val(),$.ajax({type:"POST",url:lang_base_url+"/searchAreaBranchFilter",dataType:"json",data:{filter:e},success:function(o){for(is_mobile&&(""!=e?$(".fleetDropDown#pickUp").slideDown("slow"):clossingFun()),t=o.branches.split(","),a=o.cities.split(","),$("#myULFromForPickup").find(".filterDataFromForPickup").css("display","none"),$("#myULFromForPickup").find(".filterDataParentFrom").css("display","none"),i=0;i<a.length;i++)$("#from_city_"+a[i]).css("display","block");for(i=0;i<t.length;i++)$("#from_branch_"+t[i]).css("display","block")}})}function filterSearchAreaToFieldForPickup(){var e,t=[],a=[];e=$("#myInputToForPickup").val(),$.ajax({type:"POST",url:lang_base_url+"/searchAreaBranchFilter",dataType:"json",data:{filter:e},success:function(o){for(is_mobile&&(""!=e?$(".fleetDropDown#dropOff").slideDown("slow"):clossingFun()),t=o.branches.split(","),a=o.cities.split(","),$("#myULToForPickup").find(".filterDataTo").css("display","none"),$("#myULToForPickup").find(".filterDataParentTo").css("display","none"),i=0;i<a.length;i++)$("#to_city_"+a[i]).css("display","block");for(i=0;i<t.length;i++)$("#to_branch_"+t[i]).css("display","block")}})}function validateMobileSearch(){var e=!0;return $("input.required-for-search, select.required-for-search").each((function(){""===$(this).val()&&($(this).attr("data-original-title","This field is required."),$(this).tooltip("show"),e=!1)})),e}function set_from_city_branch_also(e,t,a){$("#fromCities").val(e),mob_from_cities_change(e,t,!0,a)}function mob_from_cities_change(e,t,a,o){$(".loaderSpiner").show(),$("#myInputFromForPickup").val(""),$("#myInputFromForPickup").removeClass("required-for-search"),$("#myInputToForPickup").removeClass("required-for-search");var i,n,r=e.split("|"),s=t;$("#from_city_ylw_bx").text(s),i=r[0],n=r[1],$("#from_region_id").val(n),$("#from_city_id").val(i),$("#to_city_id").val(i),$.ajax({type:"POST",url:lang_base_url+"/getBranchesByCity",data:{city_id:i,is_delivery_mode:is_delivery_mode},success:function(e){$("#fromBranches").html(e),!0===a&&$("#fromBranches").val(o),$(".loaderSpiner").hide()}})}function set_to_city_branch_also(e,t,a){$("#toCities").val(e),mob_to_cities_change(e,t,!0,a)}function mob_to_cities_change(e,t,a,o){$(".loaderSpiner").show(),$("#myInputToForPickup").val(""),$("#myInputToForPickup").removeClass("required-for-search");var i,n=e.split("|"),r=t;$("#to_city_ylw_bx").text(r),i=n[0],$("#to_city_id").val(i),$.ajax({type:"POST",url:lang_base_url+"/getBranchesByCity",data:{city_id:i,is_delivery_mode:is_delivery_mode},success:function(e){$("#toBranches").html(e),!0===a&&$("#toBranches").val(o),$(".loaderSpiner").hide()}})}function openGoogleMapPopup(e,t,a,o,i){var n,r;if(marker="","dropoff"==o){var s=$("#from_branch_id").val();$("#to_branch_id").val();if(""!==s&&s!==a){if("eng"==lang)var l="The returning city should be the same.",d="Error";else l="تسليم السيارة يجب ان يكون في نفس المدينة",d="خطأ";return $(".responseTitle").html(d),$(".responseMsg").html(l),$("#openMsgPopupNoRedirect").click(),!1}}"dropoff"==o?("eng"==lang?(n="Return location",r="Confirm"):(n="مكان التسليم",r="تأكيد"),$(".mapConfirm").text(r),$(".containsLableForMapPopup").text(n)):("eng"==lang?(n="Delivery location",r="Select location"):(n="مكان الإستلام",r="اختر الموقع"),$(".mapConfirm").text(r),$(".containsLableForMapPopup").text(n)),$("#noLocationSelectedMessage").hide(),$("#containsLocationDetails").hide(),$("#containsErrorMessage").hide(),$("#containsAddress").text(""),$("#containsCity").text(""),"pickup"==o&&$("#delivery_charges").val(parseFloat(i));var c=parseFloat(e),p=parseFloat(t);$(".openGoogleMapPopup").click(),$("#pop_type").val(o),initAutocompleteMap(c,p,a,o),setTimeout((function(){center=map.getCenter(),google.maps.event.trigger(map,"resize"),map.setCenter(center)}),500)}function initAutocompleteMap(e,t,a,o){var i;my_center=new google.maps.LatLng(e,t),map=new google.maps.Map(document.getElementById("google_map_with_search"),{center:my_center,zoom:14,mapTypeId:"roadmap",gestureHandling:"greedy"});var n=$("#pop_type").val();if("pickup"==n?i=$(".pickup_delivery_coordinate").val():"dropoff"==n&&(i=$(".dropoff_delivery_coordinate").val()),i){i=i.split(",");var r=new google.maps.LatLng(i[0],i[1]);map.setCenter({lat:i[0],lng:i[1]}),placeMarker(r,map)}google.maps.event.addListener(map,"click",(function(e){$(".loaderSpiner").show();var t=placeMarker(e.latLng,map),a=t.split(",");$.ajax({type:"POST",url:lang_base_url+"/fetch_nearest_delivery_branch",dataType:"JSON",data:{current_latitude:a[0],current_longitude:a[1]},success:function(e){$(".loaderSpiner").hide(),1==e.status?($("#from_region_id").val(e.branch.region_id),$("#from_city_id").val(e.branch.city_id),$("#from_branch_id").val(e.branch.branch_id),$("#to_city_id").val(e.branch.city_id),$("#to_branch_id").val(e.branch.branch_id),$("#delivery_charges").val(parseFloat(e.branch.branch_delivery_charges)),getLocationAndCheckIfInArea(t,e.branch.branch_id,o)):alert(e.message)}})})),$("#google_map_outer").append('<input type="text" class="mapSerPopup controls" id="take_input" placeholder="Search" />');var s=document.getElementById("take_input"),l=new google.maps.places.SearchBox(s);map.controls[google.maps.ControlPosition.TOP_LEFT].push(s),map.addListener("bounds_changed",(function(){l.setBounds(map.getBounds())}));var d=[];l.addListener("places_changed",(function(){var e=l.getPlaces();if(0!=e.length){d.forEach((function(e){e.setMap(null)})),d=[];var t=new google.maps.LatLngBounds;e.forEach((function(e){if(e.geometry){var a={url:e.icon,size:new google.maps.Size(71,71),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(17,34),scaledSize:new google.maps.Size(25,25)};d.push(new google.maps.Marker({map:map,icon:a,title:e.name,position:e.geometry.location})),e.geometry.viewport?t.union(e.geometry.viewport):t.extend(e.geometry.location)}else console.log("Returned place contains no geometry")})),map.fitBounds(t)}})),google.maps.Polygon.prototype.Contains=function(e){for(var t=0,a=this.getPath(),o=0;o<a.getLength();o++){var i=a.getAt(o),n=o+1;n>=a.getLength()&&(n=0),r(e,i,a.getAt(n))&&t++}return t%2==1;function r(e,t,a){var o=e.lng(),i=e.lat(),n=t.lng(),r=t.lat(),s=a.lng(),l=a.lat();return r>l&&(n=a.lng(),r=a.lat(),s=t.lng(),l=t.lat()),o<0&&(o+=360),n<0&&(n+=360),s<0&&(s+=360),i!=r&&i!=l||(i+=1e-8),!(i>l||i<r||o>Math.max(n,s))&&(o<Math.min(n,s)||(n!=o?(i-r)/(o-n):1/0)>=(n!=s?(l-r)/(s-n):1/0))}},$("#google_map_with_search").css({height:"100%",width:"99%"}),setTimeout((function(){$("#google_map_with_search").css({height:"99%",width:"100%"})}),1e3)}function getLocationAndCheckIfInArea(e,t,a){var o,i="?lat_long="+e+"&branch_id="+t+"&t="+Math.random();if(!1!==(o=sendHttpAjaxRequest(lang_base_url+"/getLocationAndCheck"+i))){var n=o.branch_coordinates,r=o.selected_lat_long,s=(o.return_status,o.location_details),l=r.split(","),d=n.split("|");"pickup"==a?($(".pickup_delivery_coordinate").val(r),$(".dropoff_delivery_coordinate").val(r)):"dropoff"==a&&$(".dropoff_delivery_coordinate").val(r),checkIfPointInsideOrOutside(l[0],l[1],d,s,a,t)}}function sendHttpAjaxRequest(e){var t,a=new XMLHttpRequest;return a.onreadystatechange=function(){a.readyState==XMLHttpRequest.DONE&&(t=200==a.status?JSON.parse(a.responseText):(a.status,!1))},a.open("GET",e,!1),a.send(),t}function checkIfPointInsideOrOutside(e,t,a,o,i,n){var r="";$("#pop_type").val(i),$("#containsAddress").text(o.address),""!=o.city&&(r+=o.city+", "),""!=o.state&&(r+=o.state+", "),""!=o.country&&(r+=o.country+", "),$("#containsCity").text(r);var s=(""!=o.address?o.address+", ":"")+r;""==s&&(s="pickup"==i?$("#from_branch_"+n).find("a").text():$("#to_branch_"+n).find("a").text());for(var l=[],d=0;d<a.length;d++){var c=a[d].split(","),p=new google.maps.LatLng(c[0],c[1]);l.push(p)}var u=new google.maps.LatLng(e,t);new google.maps.Polygon({path:l}).Contains(u)?("pickup"==i&&$(".from_branch_field_for_delivery").val(s.replace(/,\s*$/,"")),"pickup"==i?($(".allIsOkForPickup").val(1),$(".allIsOkForDropoff").val(1)):$(".allIsOkForDropoff").val(1),$("#containsErrorMessage").hide(),$("#noLocationSelectedMessage").hide(),$("#containsLocationDetails").show()):($("#containsErrorMessage").show(),$("#noLocationSelectedMessage").hide(),$("#containsLocationDetails").hide(),"pickup"==i?($(".allIsOkForPickup").val(0),$(".allIsOkForDropoff").val(0)):$(".allIsOkForDropoff").val(0))}function placeMarker(e){return marker?marker.setPosition(e):marker=new google.maps.Marker({position:e,map:map}),marker.getPosition().lat()+","+marker.getPosition().lng()}function filterSearchAreaFromFieldForDelivery(){var e,t=[],a=[];e=$("#myInputFromForDelivery").val(),$.ajax({type:"POST",url:lang_base_url+"/searchAreaBranchFilter",dataType:"json",data:{filter:e},success:function(e){for(t=e.branches.split(","),a=e.cities.split(","),$("#myULFromForDelivery").find(".filterDataFromForDelivery").css("display","none"),$("#myULFromForDelivery").find(".filterDataParentFrom").css("display","none"),i=0;i<a.length;i++)$("#from_city_"+a[i]).css("display","block");for(i=0;i<t.length;i++)$("#from_branch_"+t[i]).css("display","block")}})}function filterSearchAreaToFieldForDelivery(){var e,t=[],a=[];e=$("#myInputToForDelivery").val(),$.ajax({type:"POST",url:lang_base_url+"/searchAreaBranchFilter",dataType:"json",data:{filter:e},success:function(e){for(t=e.branches.split(","),a=e.cities.split(","),$("#myULToForDelivery").find(".filterDataTo").css("display","none"),$("#myULToForDelivery").find(".filterDataParentTo").css("display","none"),i=0;i<a.length;i++)$("#to_city_"+a[i]).css("display","block");for(i=0;i<t.length;i++)$("#to_branch_"+t[i]).css("display","block")}})}function ValidationsWithIdType(e,t){var a=$("input[name='id_no']").val(),o=$("input[name='id_no']").val().length;"68"!=e&&"243"!=e||1!=t?"68"!=e&&"243"!=e||0!=t||$("input[name='license_no']").val(""):$("input[name='license_no']").val(a),"68"==e?($("#sponsorName, #sponsorNo").attr("disabled",!1),$("#sponsorName, #sponsorNo").addClass("required"),$("#sponsorName, #sponsorNo").removeClass("readonly"),$("#contains_sponsor_name, #contains_sponsor_no").show()):($("#sponsorName, #sponsorNo").attr("disabled",!0),$("#sponsorName, #sponsorNo").removeClass("required"),$("#sponsorName, #sponsorNo").addClass("readonly"),$("#contains_sponsor_name, #contains_sponsor_no").hide()),"68"==e||"243"==e?($("input[name='license_no']").attr("readonly",!0),$("input[name='id_no']").addClass("number"),$("input[name='license_no']").addClass("number")):($("input[name='license_no']").attr("readonly",!1),$("input[name='id_no']").removeClass("number"),$("input[name='license_no']").removeClass("number")),"243"!=e&&"68"!=e||10==o?$("input[name='id_no']").tooltip("hide"):($("input[name='id_no']").attr("data-original-title","This filed must contain only 10 characters"),$("input[name='id_no']").tooltip("show"))}function getDriverDetails(){var e=$("#get_driver_by").val(),t="";""==e?($("#get_driver_by").attr("data-original-title",required_message),$("#get_driver_by").tooltip("show")):($("#get_driver_by").tooltip("hide"),$(".loaderSpiner").show(),$.ajax({type:"POST",url:lang_base_url+"/getDriverInfo",dataType:"json",data:{get_driver_by:e},success:function(e){if($(".loaderSpiner").hide(),0==e.status){if("eng"==lang){var a="Error";t="No Driver Found Against This Search."}else{a="خطأ";t="لم يتم العثور على سائق بالهوية المدخلة"}$(".responseTitle").html(a),$(".responseMsg").html(t),$("#openMsgPopupNoRedirect").click()}else $.each(e.data,(function(e,t){var a=$('[name="'+e+'"]');switch(a.attr("type")){case"checkbox":a.attr("checked","checked");break;case"radio":a.filter('[value="'+t+'"]').attr("checked","checked");break;default:a.val(t)}})),ValidationsWithIdType(e.data.id_type,1),$(".phone").intlTelInput("setNumber","+"+e.data.mobile_no_seperated.original_no)}}))}function filterSellingCars(){$(".loaderSpiner").show();var e=$(".car_brand").val(),t=$(".car_year").val(),a=lang_base_url+"/filterSellingCars";$.ajax({type:"POST",url:a,data:{car_brand_id:e,car_year:t},success:function(e){$(".search-results-here").html(""),$(".search-results-here").html(e),$(".loaderSpiner").hide()}})}function interested_in_buying(e){$("#interestedCarId").val(e),$("#openInterestedInCar").click()}function interested_in_corporate_sales(){$("#interestedCorporateSales").click()}function calculateRedeem(){var e,t,a=$("#conversion_type").val(),o=$("#total_points").val(),i=$("#customer_redeem_loyalty_type").val();$("#original_total_rent_after_discount_on_promo").val(),lang;"amount_to_points"==a?(t=$("#amount_to_redeem").val(),e=lang_base_url+"/calculateRedeemPointsFromAmount"):"points_to_amount"==a&&(t=$("#points_to_redeem").val(),e=lang_base_url+"/calculateRedeemAmountFromPoints"),""==t?($(".responseTitle").html("eng"==lang?"Error":"خطأ"),$(".responseMsg").html("eng"==lang?"Please provide valid input to redeem.":"الرجاء إدخال قيمة صحيحة ليتم الحساب"),$("#openMsgPopupNoRedirect").click()):($(".loaderSpiner").show(),$.ajax({type:"POST",url:e,dataType:"json",data:{total_points:o,value_to_convert:t,conversion_type:a,customer_redeem_loyalty_type:i},success:function(e){0==e.status?($(".responseTitle").html("eng"==lang?"Error":"خطأ"),$(".responseMsg").html(e.message),$("#openMsgPopupNoRedirect").click(),$("#applyRedeemBtn").hide()):1==e.status&&$("#applyRedeemBtn").show(),$(".loaderSpiner").hide(),"amount_to_points"==a?$("#points_to_redeem").val(e.total_redeemed_points):"points_to_amount"==a&&$("#amount_to_redeem").val(e.total_redeemed_amount)}}))}function validationSts(){$("form input").attr("data-original-title","");var e=$("#owner").val(),t=$("#cvv").val(),a=$("#cardNumber").val();if("eng"===lang)var o="Please fill out this field.",i="Please enter your valid credit card number.",n="Please enter your valid cvv number";else o="الرجاء تعبئة الخانة",i="الرجاء ادخال رقم بطاقة صحيح",n="الرجاء إدخال رمز تحقق صحيح";if(""===t||isCvvValid(t))if(""===a||isCardValid(a))if(e)if(a){if(t)return!!check_session();$("#cvv").attr("data-original-title",o),$("#cvv").tooltip("show"),$("#cvv").focus()}else $("#cardNumber").attr("data-original-title",o),$("#cardNumber").tooltip("show"),$("#cardNumber").focus();else $("#owner").attr("data-original-title",o),$("#owner").tooltip("show"),$("#owner").focus();else $("#cardNumber").attr("data-original-title",i),$("#cardNumber").tooltip("show"),$("#cardNumber").focus();else $("#cvv").attr("data-original-title",n),$("#cvv").tooltip("show"),$("#cvv").focus()}function check_session(){var e=!1,t=$("#hdn_booking_id").val();return $(".loaderSpiner").show(),$.ajax({type:"POST",data:{booking_id:t},dataType:"json",url:lang_base_url+"/checkSessionBeforePayment?b_id="+t,cache:!1,async:!1,success:function(t){!1===t.status?($(".loaderSpiner").hide(),$("#sessionConflictLabel").text(t.title),$(".sessionConflictDesc").text(t.message),$("#paymentSessionConflict").modal("show"),e=!1):($(".loaderSpiner").hide(),$("#paymentSessionConflict").modal("hide"),e=!0)}}),e}function isCvvValid(e){var t=e;return!(!/^[0-9]{1,12}$/.test(t)||3!==t.length)}function isCardValid(e){return!!new RegExp("^[0-9]{13,16}$").test(e)}function upgradeCar(e,t,a,o,i,n){$(".loaderSpiner").show(),$(".plate-list").html("");var r=$("#booking_id").val(),s=$("#branchCode").val();$("#changedPrice").val(i),$("#changedCdw").val(n);var l='<img src="'+o+'" alt="Car" width="274" height="132">';$.ajax({type:"POST",dataType:"json",data:{booking_id:r,branchCode:s,carType:e,carModel:t},url:lang_base_url+"/getCarPlates",success:function(o){!0===o.status?($(".plate-list").html(o.results),$("#carPlate_no").val(""),$("#get_car").removeClass("active"),$("#get_car").addClass("visited"),$("#select_car").removeClass("visited"),$("#select_car").addClass("active"),$("#inspection_car").removeClass("active"),$("#inspection_car").removeClass("visited"),$(".wizard-1").hide(),$(".wizard-2").show(),$(".wizard-3").hide(),$(".wizard_2_1").hide(),$(".unlock1").html(l),$(".unlock2").html(l),$("#carUp").text(a),$("#carUpTitle").text(a),$("#carType").val(e),$("#carModel").val(t),$(".loaderSpiner").hide()):($(".response_msg").text(o.message),$(".loaderSpiner").hide(),$(".humanLessPopup").click())}})}function selectCarPlate(e,t){$(".loaderSpiner").show(),$.ajax({type:"POST",dataType:"json",data:{plate_no:t,booking_id:e},url:lang_base_url+"/getCarInfo",success:function(e){!0===e.status?($("#select_car").removeClass("active"),$("#select_car").addClass("visited"),$("#inspection_car").removeClass("visited"),$("#inspection_car").addClass("active"),$("#tam_issue").removeClass("visited"),$("#tam_issue").removeClass("active"),$(".wizard-1").hide(),$(".wizard-2").hide(),$(".wizard-3").show(),$(".wizard-4").hide(),$(".fuelHtml").html(e.fuel_html),$("#lastFuelTank").val(e.lastFuelTank),$("#lastKm").val(e.lastKm),$("#km-value").text(e.lastKm),$("#vehicleID").val(e.vehicleId),$(".loaderSpiner").hide()):($(".loaderSpiner").hide(),$(".response_msg").text(e.message),$(".humanLessPopup").click())}})}function step3_inspection(){$("#inspection_car").removeClass("visited"),$("#inspection_car").addClass("active"),$("#tam_issue").removeClass("active"),$(".wizard-1").hide(),$(".wizard-2").hide(),$(".wizard-3").show(),$(".wizard-4").hide(),$(".wizard-otp").hide()}function show_wiz4(){$(".loaderSpiner").show();var e=$("#booking_id").val();$("#inspection_car").addClass("visited"),$("#inspection_car").removeClass("active"),$("#tam_issue").addClass("active"),$.ajax({type:"POST",dataType:"json",data:{booking_id:e},url:lang_base_url+"/issueTammOTP",success:function(e){!0===e.status?($("#correlation_id").val(e.correlation_id),$(".wizard-1").hide(),$(".wizard-2").hide(),$(".wizard-3").hide(),$(".wizard-4").hide(),$(".wizard-otp").show(),$(".loaderSpiner").hide()):!1===e.status&&"invalidID"===e.returnCode?($(".wizard-3").hide(),$(".wizard-4").hide(),$(".wizard-otp").hide(),$(".wizard-ID").show(),$(".loaderSpiner").hide()):($(".response_msg").text(e.message),$(".loaderSpiner").hide(),$(".humanLessPopup").click())}})}function compareKmVal(e,t){var a=!1;return parseInt(t)>parseInt(e)&&(a=!0),a}$(".filterBranchesFromForPickup").on("keyup",(function(){clearTimeout(typingTimer),typingTimer=setTimeout(filterSearchAreaFromFieldForPickup,doneTypingInterval)})),$(".filterBranchesToForPickup").on("keyup",(function(){clearTimeout(typingTimer),typingTimer=setTimeout(filterSearchAreaToFieldForPickup,doneTypingInterval)})),$(".filterBranchesFromForPickup, .filterBranchesToForPickup").on("keydown",(function(){clearTimeout(typingTimer)})),$(document).on("click","#btn_forGotPassLogn",(function(e){$("#model-login").modal("hide"),$("#forGotPassLogn_mobile").modal("show")})),$(document).on("change","#fromCities",(function(e){mob_from_cities_change($(this).val(),$("option:selected",this).text(),!1,0),$("#fromBranches").parent(".field").show(),$(".wiz1Next").parents(".btn-next").show()})),$(document).on("change","#fromBranches",(function(e){$("#myInputFromForPickup").val("");var t=$(this).val(),a=$("option:selected",this).text();$("#from_branch_ylw_bx").text(a),$("#from_branch_id").val(t),$("#to_branch_id").val(t)})),$(document).on("change","#toCities",(function(e){mob_to_cities_change($(this).val(),$("option:selected",this).text(),!1,0),$("#toCities").parent(".field").show()})),$(document).on("change","#toBranches",(function(e){$("#myInputToForPickup").val("");var t=$(this).val(),a=$("option:selected",this).text();$("#to_branch_ylw_bx").text(a),$("#to_branch_id").val(t)})),$(document).on("change",".id_type",(function(e){$(".id_no").val(""),$(".validate_license_number").val(""),"243"==$(this).val()||"68"==$(this).val()?$(this).addClass("number"):$(this).removeClass("number"),$(".id_no").css({"border-color":"#afb0aa #e9eae4 #ebeae6","border-style":"solid","border-width":"1px"}),$(".id_no").tooltip("destroy"),$(".id_no").tooltip("hide"),$(".submit_btn").attr("disabled",!1)})),$(document).on("blur",".validate_license_number",(function(e){var t=$(".id_type").val(),a=$(this).val().length;"243"!=t&&"68"!=t||10==a?($(this).css({"border-color":"#afb0aa #e9eae4 #ebeae6","border-style":"solid","border-width":"1px"}),$(this).tooltip("destroy"),$(this).tooltip("hide"),$(".submit_btn").attr("disabled",!1)):($(this).css({border:"1px solid red"}),$(this).attr("data-original-title","This filed must contain only 10 characters"),$(this).tooltip("show"),$(".submit_btn").attr("disabled",!0))})),$(document).on("blur",".id_no",(function(e){var t=$(this).val(),a=$(".id_type").val(),o=$(this).val().length;"243"!=a&&"68"!=a||(10!==o?($(".id_no").css({border:"1px solid red"}),$(".id_no").attr("data-original-title","This filed must contain only 10 characters"),$(".id_no").append("<b>This filed must contain only 10 characters</b>"),$(".id_no").tooltip("show"),$(".submit_btn").attr("disabled",!0)):($(".id_no").tooltip("hide"),$(".id_no").tooltip("destroy"),$(".id_no").css({"border-color":"#afb0aa #e9eae4 #ebeae6","border-style":"solid","border-width":"1px"}),$(".submit_btn").attr("disabled",!1)),""!=t&&10==o&&$.ajax({type:"POST",url:lang_base_url+"/validateSaudiID",dataType:"json",data:{id_no:t},success:function(e){0==e.status?($(".id_no").css({border:"1px solid red"}),$(".id_no").attr("data-original-title","ID number you entered is not valid."),$(".id_no").tooltip("show"),$(".submit_btn").attr("disabled",!0)):($(".id_no").css({"border-color":"#afb0aa #e9eae4 #ebeae6","border-style":"solid","border-width":"1px"}),$(".id_no").tooltip("destroy"),$(".id_no").tooltip("hide"),$(".submit_btn").attr("disabled",!1))}}))})),$(document).on("click",".showHideOlpIdField",(function(e){"sadad"==$(this).val()?($(".olpIdField").addClass("required"),$(".olpIdField").show()):($(".olpIdField").removeClass("required"),$(".olpIdField").hide())})),$(document).on("keyup","input[name='license_no']",(function(e){$(this).val().length>19?($(this).css({border:"1px solid red"}),$(this).attr("data-original-title","This filed can contain max 19 characters."),$(this).tooltip("show"),$(".license_validate_btn").attr("type","button")):($(this).tooltip("destroy"),$(this).tooltip("hide"),$(this).css({"border-color":"#afb0aa #e9eae4 #ebeae6","border-style":"solid","border-width":"1px"}),$(".license_validate_btn").attr("type","submit"))})),$(document).on("click",".mapConfirm",(function(e){var t=$("#pop_type").val();if("pickup"==t)var a=$(".pickup_delivery_coordinate").val(),o=$(".allIsOkForPickup").val();else if("dropoff"==t)a=$(".dropoff_delivery_coordinate").val(),o=$(".allIsOkForDropoff").val();""==a?($("#noLocationSelectedMessage").show(),$("#containsErrorMessage").hide(),$("#containsLocationDetails").hide()):1==o?($("#noLocationSelectedMessage").hide(),$("#containsErrorMessage").hide(),$("#containsLocationDetails").show(),$("#google_map_popup").modal("hide")):0==o&&($("#containsErrorMessage").show(),$("#noLocationSelectedMessage").hide(),$("#containsLocationDetails").hide())})),$(document).ready((function(){if(1===logged_in_from_frontend){var e=$(".user_email_for_pending_survey").val(),t=$(".user_id_no_for_pending_survey").val(),a=lang_base_url+"/checkIfSurveyPendingToFill";$.ajax({type:"POST",url:a,dataType:"JSON",data:{email:e,id_no:t,last_segment:last_segment},success:function(e){!0===e.status?($("#openSurveyPopup").click(),$("#skipSurvey").data("customer-id",e.customerId)):console.log("no survey to fill")}})}})),$(document).on("click","#skipSurvey",(function(){var e=$(this).data("customer-id");$("#surveyPopup").modal("toggle");var t=lang_base_url+"/skipSurvey";$.ajax({type:"POST",url:t,dataType:"JSON",data:{customer_id:e},success:function(e){}})})),$(".filterBranchesFromForDelivery").on("keyup",(function(){clearTimeout(typingTimer),typingTimer=setTimeout(filterSearchAreaFromFieldForDelivery,doneTypingInterval)})),$(".filterBranchesToForDelivery").on("keyup",(function(){clearTimeout(typingTimer),typingTimer=setTimeout(filterSearchAreaToFieldForDelivery,doneTypingInterval)})),$(".filterBranchesFromForDelivery, .filterBranchesToForDelivery").on("keydown",(function(){clearTimeout(typingTimer)})),$(document).on("keyup","input[name='id_no']",(function(e){var t=$(this).val(),a=$("select[name='id_type'] option:selected").val();"68"==a||"243"==a?($("input[name='license_no']").attr("readonly",!0),$("input[name='license_no']").css({"background-color":"#e9eae4"}),$("input[name='license_no']").val(""),$("input[name='license_no']").val(t)):($("input[name='license_no']").attr("readonly",!1),$("input[name='license_no']").css({"background-color":"#ffffff"}))})),$(".corporate-phone-primary, .corporate-phone-secondary").intlTelInput({initialCountry:"sa",excludeCountries:["il"],nationalMode:!1,separateDialCode:!0,autoPlaceholder:"off",formatOnDisplay:!1,utilsScript:base_url+"/public/frontend/intTelInput/js/utils.js"}),$(document).on("focusout",".corporate-phone-primary",(function(e){"sa"==$(this).intlTelInput("getSelectedCountryData").iso2?9!=$(this).val().length?($(this).css({border:"1px solid red"}),$(this).attr("data-original-title","This filed must contain only 9 characters"),$(this).tooltip("show"),$(".submit_btn").attr("disabled",!0)):($(this).tooltip("destroy"),$(this).tooltip("hide"),$(this).css({"border-color":"#afb0aa #e9eae4 #ebeae6","border-style":"solid","border-width":"1px"}),$(".submit_btn").attr("disabled",!1)):($(this).tooltip("destroy"),$(this).tooltip("hide"),$(this).css({"border-color":"#afb0aa #e9eae4 #ebeae6","border-style":"solid","border-width":"1px"}),$(".submit_btn").attr("disabled",!1));var t=$(".corporate-phone-primary").intlTelInput("getNumber");$(".primary_inttelno").val(t)})),$(".corporate-phone-primary").on("countrychange",(function(e,t){"sa"==$(this).intlTelInput("getSelectedCountryData").iso2?9!=$(this).val().length?($(this).css({border:"1px solid red"}),$(this).attr("data-original-title","This filed must contain only 9 characters"),$(this).tooltip("show"),$(".submit_btn").attr("disabled",!0)):($(this).tooltip("destroy"),$(this).tooltip("hide"),$(this).css({"border-color":"#afb0aa #e9eae4 #ebeae6","border-style":"solid","border-width":"1px"}),$(".submit_btn").attr("disabled",!1)):($(this).tooltip("destroy"),$(this).tooltip("hide"),$(this).css({"border-color":"#afb0aa #e9eae4 #ebeae6","border-style":"solid","border-width":"1px"}),$(".submit_btn").attr("disabled",!1));var a=$(".corporate-phone-primary").intlTelInput("getNumber");$(".primary_inttelno").val(a)})),$(document).on("focusout",".corporate-phone-secondary",(function(e){"sa"==$(this).intlTelInput("getSelectedCountryData").iso2?9!=$(this).val().length?($(this).css({border:"1px solid red"}),$(this).attr("data-original-title","This filed must contain only 9 characters"),$(this).tooltip("show"),$(".submit_btn").attr("disabled",!0)):($(this).tooltip("destroy"),$(this).tooltip("hide"),$(this).css({"border-color":"#afb0aa #e9eae4 #ebeae6","border-style":"solid","border-width":"1px"}),$(".submit_btn").attr("disabled",!1)):($(this).tooltip("destroy"),$(this).tooltip("hide"),$(this).css({"border-color":"#afb0aa #e9eae4 #ebeae6","border-style":"solid","border-width":"1px"}),$(".submit_btn").attr("disabled",!1));var t=$(".corporate-phone-secondary").intlTelInput("getNumber");$(".secondary_inttelno").val(t)})),$(".corporate-phone-secondary").on("countrychange",(function(e,t){"sa"==$(this).intlTelInput("getSelectedCountryData").iso2?9!=$(this).val().length?($(this).css({border:"1px solid red"}),$(this).attr("data-original-title","This filed must contain only 9 characters"),$(this).tooltip("show"),$(".submit_btn").attr("disabled",!0)):($(this).tooltip("destroy"),$(this).tooltip("hide"),$(this).css({"border-color":"#afb0aa #e9eae4 #ebeae6","border-style":"solid","border-width":"1px"}),$(".submit_btn").attr("disabled",!1)):($(this).tooltip("destroy"),$(this).tooltip("hide"),$(this).css({"border-color":"#afb0aa #e9eae4 #ebeae6","border-style":"solid","border-width":"1px"}),$(".submit_btn").attr("disabled",!1));var a=$(".corporate-phone-secondary").intlTelInput("getNumber");$(".secondary_inttelno").val(a)})),$(document).on("click",".bookNowBtnForCorporate",(function(){var e=$(".mobile_no"),t=!0;if("eng"==lang)var a="Please accept the terms and conditions to proceed.",o="Message";else a="الرجاء الموافقة على الشروط والأحكام",o="الرسالة";if($("input.required, select.required").each((function(){$(this).parent("li").is(":visible")&&""==$(this).val()&&($(this).attr("data-original-title",required_message),$(this).tooltip("show"),this.scrollIntoView(!1),t=!1)})),$(".accept_terms").is(":checked")||($(".responseTitle").html(o),$(".responseMsg").html(a),$("#openMsgPopupNoRedirect").click(),this.scrollIntoView(!1),t=!1),""==e.val()?(e.attr("data-original-title",required_message),e.tooltip("show"),this.scrollIntoView(!1),t=!1):e.tooltip("hide"),$("input[name=payment_method]:checked").length>0||(t=!1),!0!==t)return!1;$(".loaderSpiner").show(),$(".bookNowForCorporateForm").submit()})),$(document).on("submit",".interestedInCorpSales",(function(e){var t=!0;if($(".interestedInCorpSales input.required,.interestedInCorpSales textarea.required").each((function(){""==$(this).val()?($(this).attr("data-original-title",required_message),$(this).attr("data-placement","right"),$(this).tooltip("show"),t=!1):$(this).tooltip("hide")})),t){var a=$(this),o=a.attr("method"),i=a.attr("action");$(".loaderSpiner").show(),$.ajax({type:o,url:i,dataType:"json",data:a.serialize(),cache:!1,success:function(e){$(".loaderSpiner").hide(),e.captcha?($("#interestedCorporateSalesModal").modal("hide"),$(".interestedInCorpSales")[0].reset(),$(".responseTitle").html(e.title),$(".responseMsg").html(e.message),$("#openMsgPopupNoRedirect").click()):($(".responseTitle").html(e.title),$(".responseMsg").html(e.message),$("#openMsgPopupNoRedirect").click())}})}})),$(document).on("submit",".interestedInCarForm",(function(e){var t=!0;if($(".interestedInCarForm input.required").each((function(){""==$(this).val()?($(this).attr("data-original-title",required_message),$(this).attr("data-placement","right"),$(this).tooltip("show"),t=!1):$(this).tooltip("hide")})),t){var a=$(this),o=a.attr("method"),i=a.attr("action");$(".loaderSpiner").show(),$.ajax({type:o,url:i,dataType:"json",data:new FormData(this),cache:!1,contentType:!1,processData:!1,success:function(e){$("#interestedInCar").modal("hide"),$(".interestedInCarForm")[0].reset(),$(".loaderSpiner").hide(),$(".responseTitle").html(e.title),$(".responseMsg").html(e.message),$("#openMsgPopupNoRedirect").click()}})}})),$(document).on("keyup",".phone-popup",(function(e){"sa"==$(this).intlTelInput("getSelectedCountryData").iso2?9!=$(this).val().length?($(this).css({border:"1px solid red"}),$(this).attr("data-original-title","This filed must contain only 9 characters"),$(this).tooltip("show"),$(".interestedInCarForm :submit").prop("disabled",!0)):($(this).tooltip("destroy"),$(this).tooltip("hide"),$(this).css({"border-color":"#afb0aa #e9eae4 #ebeae6","border-style":"solid","border-width":"1px"}),$(".interestedInCarForm :submit").prop("disabled",!1)):($(this).tooltip("destroy"),$(this).tooltip("hide"),$(this).css({"border-color":"#afb0aa #e9eae4 #ebeae6","border-style":"solid","border-width":"1px"}),$(".interestedInCarForm :submit").prop("disabled",!1));var t=$(this).intlTelInput("getNumber");"second"==$(this).data("second")?$(".intTelNo2").val(t):$(".intTelNo").val(t)})),$(".phone-popup").on("countrychange",(function(e,t){"sa"==$(this).intlTelInput("getSelectedCountryData").iso2?9!=$(this).val().length?($(this).css({border:"1px solid red"}),$(this).attr("data-original-title","This filed must contain only 9 characters"),$(this).tooltip("show"),$(".interestedInCarForm :submit").prop("disabled",!0)):($(this).tooltip("destroy"),$(this).tooltip("hide"),$(this).css({"border-color":"#afb0aa #e9eae4 #ebeae6","border-style":"solid","border-width":"1px"}),$(".interestedInCarForm :submit").prop("disabled",!1)):($(this).tooltip("destroy"),$(this).tooltip("hide"),$(this).css({"border-color":"#afb0aa #e9eae4 #ebeae6","border-style":"solid","border-width":"1px"}),$(".interestedInCarForm :submit").prop("disabled",!1));var a=$(this).intlTelInput("getNumber");$(".intTelNo").val(a)})),$("#loadMoreCars").on("click",(function(e){var t=$(this),a=t.data("offset"),o=t.data("limit"),i=lang_base_url+"/getMoreSellingCars";$(".loaderSpiner").show(),$.ajax({type:"POST",url:i,dataType:"json",data:{offset:a,limit:o},success:function(e){$(".loaderSpiner").hide(),$("#loadMoreCars").data("offset",e.offset),$(".search-results-here").children(".row").last(".car-to-sell").append(e.html),0==e.show_load_more&&$("#loadMoreCars").hide()}})})),$(document).on("keydown",".amount_or_points",(function(e){var t=$(this).attr("id");"amount_to_redeem"==t?($("#conversion_type").val("amount_to_points"),$("#points_to_redeem").val("")):"points_to_redeem"==t&&($("#conversion_type").val("points_to_amount"),$("#amount_to_redeem").val(""))})),$(".amount_or_points").on("keyup",(function(){clearTimeout(typingTimer),typingTimer=setTimeout(calculateRedeem,doneTypingInterval)})),$(document).on("click","#calculateRedeemBtn",(function(e){var t,a,o=$("#conversion_type").val(),i=$("#total_points").val(),n=$("#customer_redeem_loyalty_type").val();$("#original_total_rent_after_discount_on_promo").val(),lang;"amount_to_points"==o?(a=$("#amount_to_redeem").val(),t=lang_base_url+"/calculateRedeemPointsFromAmount"):"points_to_amount"==o&&(a=$("#points_to_redeem").val(),t=lang_base_url+"/calculateRedeemAmountFromPoints"),""==a?($(".responseTitle").html("eng"==lang?"Error":"خطأ"),$(".responseMsg").html("eng"==lang?"Please provide valid input to redeem.":"الرجاء إدخال قيمة صحيحة ليتم الحساب"),$("#openMsgPopupNoRedirect").click()):($(".loaderSpiner").show(),$.ajax({type:"POST",url:t,dataType:"json",data:{total_points:i,value_to_convert:a,conversion_type:o,customer_redeem_loyalty_type:n},success:function(e){0==e.status?($(".responseTitle").html("eng"==lang?"Error":"خطأ"),$(".responseMsg").html(e.message),$("#openMsgPopupNoRedirect").click(),$("#applyRedeemBtn").hide()):1==e.status&&$("#applyRedeemBtn").show(),$(".loaderSpiner").hide(),"amount_to_points"==o?$("#points_to_redeem").val(e.total_redeemed_points):"points_to_amount"==o&&$("#amount_to_redeem").val(e.total_redeemed_amount)}}))})),$(document).on("click","#applyRedeemBtn",(function(e){var t,a,o=$("#conversion_type").val(),i=$("#total_points").val(),n=$("#customer_redeem_loyalty_type").val(),r=$("#original_total_rent_after_discount_on_promo").val(),s=$("#total_amount").html(),l=$("#show_vat_applied").html();s=s.replace(/,/g,""),l=l.replace(/,/g,"");var d=$("#payable_amount").val(),c="arb"==lang?"ريال سعودي":"SAR";"amount_to_points"==o?(a=$("#amount_to_redeem").val(),t=lang_base_url+"/calculateRedeemPointsFromAmount"):"points_to_amount"==o&&(a=$("#points_to_redeem").val(),t=lang_base_url+"/calculateRedeemAmountFromPoints"),""==a?($(".responseTitle").html("eng"==lang?"Error":"خطأ"),$(".responseMsg").html("eng"==lang?"Please provide valid input to redeem.":"الرجاء إدخال قيمة صحيحة ليتم الحساب"),$("#openMsgPopupNoRedirect").click()):($(".loaderSpiner").show(),$.ajax({type:"POST",url:t,dataType:"json",data:{total_points:i,value_to_convert:a,conversion_type:o,customer_redeem_loyalty_type:n},success:function(e){if(0==e.status)$(".responseTitle").html("eng"==lang?"Error":"خطأ"),$(".responseMsg").html(e.message),$("#openMsgPopupNoRedirect").click(),$("#total_rent_after_discount_on_promo").val(parseFloat(r).toFixed(2)),$("#showTotalAmount").html(parseFloat(r).toFixed(2)),$(".containsRedeemDiscount").hide(),$("#applyRedeemBtn").hide(),$("#all_ok_to_redeem").val("no");else if(1==e.status){var t=e.total_redeemed_amount,a=$("#total_rent_after_discount_on_promo").val()-t;$("#total_rent_after_discount_on_promo").val(parseFloat(a).toFixed(2)),$(".containsRedeemDiscount").show(),$("#applyRedeemBtn").show(),$("#all_ok_to_redeem").val("yes"),$(".redeemApplySection").addClass("active"),$(".payment_options_area_div").find('input[type="button"]').hide(),$(".promoCodeSection").hide(),$("#showTotalAmount").html(parseFloat(d-t).toFixed(2))}$("#redeem_points_used").val(e.total_redeemed_points),$("#discount_on_redeem").html(e.total_redeemed_amount+" "+c),$("#redeem_discount_availed").val(e.total_redeemed_amount),$(".loaderSpiner").hide(),"amount_to_points"==o?$("#points_to_redeem").val(e.total_redeemed_points):"points_to_amount"==o&&$("#amount_to_redeem").val(e.total_redeemed_amount)}})),$(".walkin_register").click((function(){$(this).attr("disabled",!0)}))})),$(document).on("submit","#stsPayOne",(function(){return!!validationSts()})),$(".redirectToHome").on("click",(function(){window.location.href=lang_base_url})),$(".show_wiz1").on("click",(function(){$("#get_car").removeClass("visited"),$("#get_car").addClass("active"),$("#select_car").removeClass("active"),$("#select_car").removeClass("visited"),$(".wizard-1").show(),$(".wizard-2").hide()})),$(".show_wiz2").on("click",(function(){$(".loaderSpiner").show(),$(".plate-list").html("");var e=$("#booking_id").val(),t=$("#branchCode").val(),a=$("#carType").val(),o=$("#carModel").val();$.ajax({type:"POST",dataType:"json",data:{booking_id:e,branchCode:t,carType:a,carModel:o},url:lang_base_url+"/getCarPlates",success:function(e){!0===e.status?($(".plate-list").html(e.results),$("#carPlate_no").val(""),$("#get_car").removeClass("active"),$("#get_car").addClass("visited"),$("#select_car").removeClass("visited"),$("#select_car").addClass("active"),$("#inspection_car").removeClass("active"),$("#inspection_car").removeClass("visited"),$(".wizard-1").hide(),$(".wizard-2").show(),$(".wizard-3").hide(),$(".loaderSpiner").hide()):($(".response_msg").text(e.message),$(".loaderSpiner").hide(),$(".humanLessPopup").click())}})})),$(".show_wizard_2_1").on("click",(function(){$(".loaderSpiner").show();var e=$("#booking_id").val(),t=$("#branchCode").val(),a=$("#carType").val();$.ajax({type:"POST",dataType:"json",data:{booking_id:e,branch_code:t,car_type:a},url:lang_base_url+"/changeCar",success:function(e){!0===e.status?($(".upgradedCars").html(e.results),$("#select_car").addClass("active"),$("#inspection_car").removeClass("active"),$(".wizard-1").hide(),$(".wizard-2").hide(),$(".wizard_2_1").show(),$(".wizard-3").hide(),$(".loaderSpiner").hide()):($(".response_msg").text(e.message),$(".loaderSpiner").hide(),$(".humanLessPopup").click())}})})),$(".back_to_wiz2").on("click",(function(){$("#carPlate_no").val(""),$(".wizard-2").show(),$(".wizard_2_1").hide()})),$(".select_back_to_wiz2").on("click",(function(){$(this).data("car_id");$(".loaderSpiner").show()})),$(".show_wiz3").on("click",(function(){var e=$("#carPlate_no").val(),t=$("#booking_id").val();""===e?($(".response_msg").text("Please select car plate to proceed."),$(".humanLessPopup").click()):selectCarPlate(t,e)})),$(".show_wiz4").on("click",(function(){show_wiz4()})),$(".back_to_insp").on("click",(function(){step3_inspection()})),$(".btnIssueTamm").on("click",(function(){var e=$("#booking_id").val(),t=$("#id_no").val();""===t?($(".response_msg").text("Please enter your valid National ID to proceed."),$(".humanLessPopup").click()):($(".loaderSpiner").show(),$.ajax({type:"POST",dataType:"json",data:{booking_id:e,id_no:t},url:lang_base_url+"/issueTammOTP",success:function(e){!0===e.status?($("#correlation_id").val(e.correlation_id),$(".wizard-4").hide(),$(".wizard-otp").show(),$(".loaderSpiner").hide()):($(".response_msg").text(e.message),$(".loaderSpiner").hide(),$(".humanLessPopup").click())}}))})),$(".btnTammAuth").on("click",(function(){var e=$("#booking_id").val(),t=$("#id_no").val(),a=$("#tamm_otp").val(),o=$("#vehicleID").val(),i=$("#correlation_id").val(),n=$("#id_version").val(),r=$("#changedPrice").val(),s=$("#changedCdw").val();""===a?($(".response_msg").text("Please enter OTP to proceed."),$(".humanLessPopup").click()):($(".loaderSpiner").show(),$.ajax({type:"POST",dataType:"json",data:{id_no:t,tamm_otp:a,booking_id:e,vehicle_id:o,correlation_id:i,id_version:n,changedPrice:r,changedCdw:s},url:lang_base_url+"/issueTammAuth",success:function(e){!0===e.status?($(".unlock1").hide(),$(".wizard-otp").hide(),$(".wizard-id-version").hide(),$(".wizard-4").hide(),$(".wizard-unlock").show(),$(".loaderSpiner").hide()):!1===e.status&&"invalidID"===e.returnCode?($("#id_no").val(""),$(".wizard-3").hide(),$(".wizard-otp").hide(),$(".wizard-4").show(),$(".response_msg").text(e.message),$(".loaderSpiner").hide(),$(".humanLessPopup").click()):!1===e.status&&"invalidIDVersion"===e.returnCode?($("#id_version").val(""),$(".wizard-3").hide(),$(".wizard-4").hide(),$(".wizard-otp").hide(),$(".wizard-id-version").show(),$(".response_msg").text(e.message),$(".loaderSpiner").hide(),$(".humanLessPopup").click()):($(".response_msg").text(e.message),$(".loaderSpiner").hide(),$(".humanLessPopup").click())}}))})),$(".btnUnlockCar").on("click",(function(){$("#unLockCarModal").modal("show");var e=$("#booking_id").val(),t=$("#vehicleID").val();$.ajax({type:"POST",dataType:"json",data:{booking_id:e,vehicleID:t},url:lang_base_url+"/unlockCar",success:function(e){!0===e.status?($(".unlock1").hide(),$(".wizard-unlock").hide(),$(".getCarSteps").hide(),$(".wizard-done").show(),$("#unLockCarModal").modal("hide"),$(".loaderSpiner").hide()):($(".response_msg").text(e.message),$("#unLockCarModal").modal("hide"),$(".loaderSpiner").hide(),$(".humanLessPopup").click())}})})),$(".saveInspection-bk").on("click",(function(){var e=$("#booking_id").val(),t=$("#carPlate_no").val(),a=$("#lastFuelTank").val(),o=$("#lastKm").val();$(".loaderSpiner").show(),$.ajax({type:"POST",dataType:"json",data:{getPlateNo:t,booking_id:e,lastKm:o,lastFuelTank:a},url:lang_base_url+"/pickUpInspection",success:function(e){!0===e.status?($("#showCarInspection").modal("hide"),$(".loaderSpiner").hide()):($("#showCarInspection").modal("hide"),$(".response_msg").text(e.message),$(".loaderSpiner").hide(),$(".humanLessPopup").click())}})})),$(document).on("click",".plateLable",(function(e){e.stopPropagation(),e.preventDefault(),$(".plateLable").removeClass("selected");var t;t=$(this).siblings("input").val(),$(this).addClass("selected"),$("#carPlate_no").val(t)})),$(document).on("click","#drawBtn",(function(e){e.preventDefault(),$(".popupDiv").fadeIn("slow")})),$(document).on("click",".okToWait",(function(e){e.preventDefault(),$(".loaderSpiner").show()})),$(document).on("click",".close-inspection-popup",(function(e){e.preventDefault(),$(".popupDiv").fadeOut("slow")})),$(".show_et_wiz1").on("click",(function(){$("#endTrip_inspection").addClass("visited"),$("#endTrip_inspection").addClass("active"),$("#endTrip_payment").removeClass("visited"),$("#endTrip_payment").removeClass("active"),$(".et-wizard-1").show(),$(".et-wizard-2").hide(),$(".alert-danger").hide()})),$(".show_et_wiz2").on("click",(function(){var e=$("#booking_id").val(),t=$("#oasis_contract_no").val(),a=$("#closing_branch").val(),o=$("#kmIn").val(),i=$("#actualkm").val(),n=$("#fuelTankIn").val(),r="",s="";if("eng"===lang?(r="Next",s="Please increase km value"):(r="التالي",s="الرجاء إضافة ال كم"),!compareKmVal(i,o))return $(".response_msg").text(s),$(".loaderSpiner").hide(),$(".humanLessPopup").click(),!1;$(".loaderSpiner").show(),$.ajax({type:"POST",dataType:"json",data:{booking_id:e,contract_no:t,closing_branch:a,kmIn:o,fuelTankIn:n},url:lang_base_url+"/getContractBalance",success:function(e){!0===e.status?$.isNumeric(e.balance)?($("#endTrip_inspection").addClass("visited"),$("#endTrip_inspection").removeClass("active"),$("#endTrip_payment").addClass("active"),$("#contractBalance").val(e.balance),$("#kmIn").val(e.kmIn),$("#fuelTankIn").val(e.fuelTankIn),$("#stsForm").html(e.formHtml),$(".et-wizard-1").hide(),$(".et-wizard-2").show(),$(".et-wizard-3").hide(),$(".loaderSpiner").hide(),parseFloat(e.balance)<0?($("#skip_or_next").addClass("show_et_wiz3_2"),$("#skip_or_next").text(r),$("#skip_or_next").css("padding","15px 20px")):parseFloat(e.balance)>0&&($("#skip_or_next").attr("data-toggle","modal"),$("#skip_or_next").attr("data-target","#showPayExtras"))):($(".response_msg").text(e.balance),$(".loaderSpiner").hide(),$(".humanLessPopup").click()):($(".response_msg").text(e.message),$(".loaderSpiner").hide(),$(".humanLessPopup").click())}})})),$(document).on("click",".show_et_wiz3_2",(function(){$("#showPayExtras").modal("hide"),$(".et-wizard-2").hide(),$(".et-wizard-3").show(),$(".et-wizard-4").hide()})),$(".show_et_wiz3").on("click",(function(){$("#showPayExtras").modal("hide"),$(".et-wizard-2").hide(),$(".et-wizard-3").show(),$(".et-wizard-4").hide()})),$("#forceToPay").on("click",(function(){if(""===$("#transReference").val())return $("#forcePayment").modal("show"),!1;$(".et-wizard-2").hide(),$(".et-wizard-3").show(),$(".et-wizard-4").hide()})),$(".show_et_wiz4").on("click",(function(){if("eng"===lang)var e="Please Drop Keys Inside The Car",t="Please close the car windows",a="Please close the car doors";else e="الرجاء وضع المفتاح داخل السيارة",t="الرجاء إغلاق نوافذ السيارة",a="الرجاء إغلاق أبواب السيارة";if($("#drop_keys").is(":checked"))if($("#car_windows").is(":checked"))if($("#close_doors").is(":checked")){$("#lockCarModal").modal("show");var o=$("#booking_id").val(),i=$("#oasis_contract_no").val(),n=$("#closing_branch").val(),r=$("#kmIn").val(),s=$("#fuelTankIn").val(),l=$("#plate_no").val(),d=$("#tammStatus").val(),c=$("#closeType").val();$.ajax({type:"POST",dataType:"json",data:{booking_id:o,contract_no:i,closing_branch:n,kmIn:r,fuelTankIn:s,tammStatus:d,closeType:c},url:lang_base_url+"/closeContract",success:function(e){!0===e.status?($(".unlock1").hide(),$(".et-wizard-3").hide(),$(".et-wizard-4").show(),$(".loaderSpiner").hide(),$("#lockCarModal").modal("hide"),$.ajax({type:"POST",dataType:"json",data:{booking_id:o,plate_no:l},url:lang_base_url+"/cancelTammAuth",success:function(e){!0===e.status&&($(".et-wizard-4").hide(),$(".et-wizard-tamm").show())}})):($(".response_msg").text(e.message),$(".loaderSpiner").hide(),$("#lockCarModal").modal("hide"),$(".humanLessPopup").click())}})}else $(".response_msg").text(a),$(".loaderSpiner").hide(),$(".humanLessPopup").click();else $(".response_msg").text(t),$(".loaderSpiner").hide(),$(".humanLessPopup").click();else $(".response_msg").text(e),$(".loaderSpiner").hide(),$(".humanLessPopup").click()})),$("#kmValue").change((function(e){e.preventDefault();var t=$(this).attr("data-pickupValue"),a=$(this).val();compareKmVal(t,a)?($("#kmValue").val(a),$("#kmIn").val(a)):($("#kmValue").val(t),$("#kmIn").val(t))})),$((function(){$(".numbers-row").append('<div class="inc button">+</div><div class="dec button">-</div>'),$(".button").on("click",(function(){var e=$(this),t=$("#actualkm").val(),a=e.parent().find("input").val();if("+"===e.text())var o=parseFloat(a)+1;else if(a>0&&t<a)o=parseFloat(a)-1;else o=parseFloat(t);$("#kmIn").val(o),$("#kmValue").val(o)}))}));var sheet=document.createElement("style"),$rangeInput=$(".range1 input"),prefs=["webkit-slider-runnable-track","moz-range-track","ms-track"];document.body.appendChild(sheet);var getTrackStyle=function(e){var t=e.value,a=14.333333334*(t-1),o="";$(".range-labels li").removeClass("active selected");var i=$(".range-labels").find("li:nth-child("+t+")");i.addClass("active selected"),i.prevAll().addClass("selected");for(var n=0;n<prefs.length;n++)o+=".range1 {background: linear-gradient(to right, #F4AA22 0%, #F4AA22 "+a+"%, #fff "+a+"%, #fff 100%)}",o+=".range1 input::-"+prefs[n]+"{background: linear-gradient(to right, #F4AA22 0%, #F4AA22 "+a+"%, #b2b2b2 "+a+"%, #b2b2b2 100%)}";return o};function checkAlphanumericString(e){return!!e.match(/^[a-zA-Z0-9]*$/)}function booking_hours_diff_not_good(e){var t="eng"==lang?"Error":"خطأ",a="eng"==lang?"You can only take this car for max "+e+" hours.":"يمكنك فقط أخذ هذه السيارة لمدة "+e+" ساعات كحد أقصى، نرجو تعديل التاريخ/الوقت";$(".responseTitleForHourly").html(t),$(".responseMsgForHourly").html(a),$("#msgPopupNoRedirectForHourly").modal("show")}function open_time_picker(){}function showQitafModal(){$("#qitafModal").modal("show")}function qitafSendOTP(){var e=$("#qitaf_mobile_number").val();""==e?($("#qitaf_mobile_number").attr("data-original-title",required_message),$("#qitaf_mobile_number").tooltip("show")):($("#qitaf_mobile_number").tooltip("destroy"),$("#qitaf_mobile_number").tooltip("hide"),$(".loaderSpiner").show(),$.ajax({type:"POST",url:lang_base_url+"/qitafSendOTP",dataType:"json",data:{qitaf_mobile_number:e},success:function(e){setTimeout((function(){$(".loaderSpiner").hide(),1==e.status?($("#qitafModal").modal("hide"),$("#qitafOTPModal").modal("show")):($(".responseTitle").html("eng"==lang?"Error":"خطأ"),$(".responseMsg").html(e.message),$("#openMsgPopupNoRedirect").click())}),500)}}))}function qitafSendRedeemRequest(){var e=$("#qitaf_otp").val(),t=$("#qitaf_amount").val(),a=$("#qitaf_mobile_number").val();""==e||""==t?(""==e?($("#qitaf_otp").attr("data-original-title",required_message),$("#qitaf_otp").tooltip("show")):($("#qitaf_otp").tooltip("destroy"),$("#qitaf_otp").tooltip("hide")),""==t?($("#qitaf_amount").attr("data-original-title",required_message),$("#qitaf_amount").tooltip("show")):($("#qitaf_amount").tooltip("destroy"),$("#qitaf_amount").tooltip("hide"))):($("#qitaf_otp").tooltip("destroy"),$("#qitaf_otp").tooltip("hide"),$("#qitaf_amount").tooltip("destroy"),$("#qitaf_amount").tooltip("hide"),$(".loaderSpiner").show(),$.ajax({type:"POST",url:lang_base_url+"/qitafRedeem",dataType:"json",data:{qitaf_otp:e,qitaf_amount:t,qitaf_mobile_number:a},success:function(e){setTimeout((function(){var t;($(".loaderSpiner").hide(),1==e.status)?($("#qitafOTPModal").modal("hide"),$(".qitafArea").find(".BtnNtXT").hide(),$(".payFrmUserInfo.paymentMethods").find(".paymentOption.heading, .paymentOption.objects").hide(),$(".bookNowBtn").hide(),$(".niqatyArea").hide(),(t=e.amount_remaining?$("#CreditCard"):$("#cash")).length&&(t.click(),$(".bookNowBtn").val("eng"==lang?"Book Now":"احجز الآن"),$(".bookNowBtn").show()),$(".qitafArea .proCdSec .qitafMsg").html(e.text_to_show),$(".TotalAmountWithVatForMobileWithDays").html(e.total_payable_amount_after_qitaf)):($(".responseTitle").html("eng"==lang?"Error":"خطأ"),$(".responseMsg").html(e.message),$("#openMsgPopupNoRedirect").click())}),500)}}))}function edit_booking(){$(".loaderSpiner").show();var e=$(".editBookingSec").find('[name="booking_id"]').val(),t=$(".editBookingSec").find('[name="pickup_date"]').val(),a=$(".editBookingSec").find('[name="pickup_time"]').val();$.ajax({type:"POST",url:lang_base_url+"/edit-booking/"+btoa(e),data:{booking_id:e,pickup_date:t,pickup_time:a},dataType:"JSON",success:function(t){$(".loaderSpiner").hide(),$(".responseTitle").html(t.title),$(".responseMsg").html(t.message),$("#openMsgPopupNoRedirect").click(),1==t.status&&setTimeout((function(){window.location.href=lang_base_url+"/manage-booking/"+btoa(e)}),2e3)}})}function show_niqaty_modal(){$("#niqatyModal").modal("show")}function get_niqaty_redeem_options(){var e=$("#niqaty_mobile_number").val();""==e?($("#niqaty_mobile_number").attr("data-original-title",required_message),$("#niqaty_mobile_number").tooltip("show")):($("#niqaty_mobile_number").tooltip("destroy"),$("#niqaty_mobile_number").tooltip("hide"),$(".loaderSpiner").show(),$.ajax({type:"POST",url:lang_base_url+"/get_niqaty_redeem_options",dataType:"json",data:{niqaty_mobile_number:e},success:function(e){setTimeout((function(){$(".loaderSpiner").hide(),1==e.status?($("#niqatyModal").modal("hide"),$("#niqatyRedeemOptionsModal").find("#niqatyRedeemOptions").html(e.message),$("#niqatyRedeemOptionsModal").modal("show")):($(".responseTitle").html("eng"==lang?"Error":"خطأ"),$(".responseMsg").html(e.message),$("#openMsgPopupNoRedirect").click())}),500)}}))}function authorize_niqaty_redeem_request(){$(".niqaty-redeem-option:checked").length>0?($(".loaderSpiner").show(),$.ajax({type:"POST",url:lang_base_url+"/authorize_niqaty_redeem_request",dataType:"json",data:$(".niqaty-redeem-option:checked").data(),success:function(e){setTimeout((function(){$(".loaderSpiner").hide(),1==e.status?($("#niqatyRedeemOptionsModal").modal("hide"),$("#niqatyOTPModal").modal("show"),$("#niqaty_transaction_reference_number").val(e.message),$("#request_data").val(e.request_data)):($(".responseTitle").html("eng"==lang?"Error":"خطأ"),$(".responseMsg").html(e.message),$("#openMsgPopupNoRedirect").click())}),500)}})):($(".responseTitle").html("eng"==lang?"Error":"خطأ"),$(".responseMsg").html("You must select any of the available redeem options to proceed!"),$("#openMsgPopupNoRedirect").click())}function confirm_niqaty_redeem_request(){var e=$("#niqaty_otp").val();if(""==e)$("#niqaty_otp").attr("data-original-title",required_message),$("#niqaty_otp").tooltip("show");else{$("#niqaty_otp").tooltip("destroy"),$("#niqaty_otp").tooltip("hide");var t=$("#niqaty_mobile_number").val(),a=$("#niqaty_transaction_reference_number").val(),o=$("#request_data").val();$(".loaderSpiner").show(),$.ajax({type:"POST",url:lang_base_url+"/confirm_niqaty_redeem_request",dataType:"json",data:{otp:e,mobile:t,transactionReference:a,request_data:o},success:function(e){setTimeout((function(){var t;($(".loaderSpiner").hide(),1==e.status)?($("#niqatyOTPModal").modal("hide"),$(".niqatyArea").find(".BtnNtXT").hide(),$(".payFrmUserInfo.paymentMethods").find(".paymentOption.heading, .paymentOption.objects").hide(),$(".bookNowBtn").hide(),$(".qitafArea").hide(),(t=e.amount_remaining?$("#CreditCard"):$("#cash")).length&&(t.click(),$(".bookNowBtn").val("eng"==lang?"Book Now":"احجز الآن"),$(".bookNowBtn").show()),$(".niqatyArea .proCdSec .niqatyMsg").html(e.text_to_show),$(".TotalAmountWithVatForMobileWithDays").html(e.total_payable_amount_after_niqaty)):($(".responseTitle").html("eng"==lang?"Error":"خطأ"),$(".responseMsg").html(e.message),$("#openMsgPopupNoRedirect").click())}),500)}})}}function add_experience_section_for_career_page(){for(var e=!0,t=$("input[name='company_name[]']").map((function(){return $(this).val()})).get(),a=$("input[name='job_title[]']").map((function(){return $(this).val()})).get(),o=$("input[name='from_date[]']").map((function(){return $(this).val()})).get(),i=$("input[name='to_date[]']").map((function(){return $(this).val()})).get(),n=0;n<$("input[name='company_name[]']").length;n++)""!=t[n]&&""!=a[n]&&""!=o[n]&&""!=i[n]||(e=!1);if(e){var r='<div class="col-md-3 col-sm-6 isNoFloat"><label>'+write_lbl+'</label><input type="text" name="company_name[]" placeholder="'+write_lbl+'" required="" autocomplete="off"></div><div class="col-md-3 col-sm-6 isNoFloat"><label>'+job_title_lbl+'</label><input type="text" name="job_title[]" placeholder="'+write_lbl+'" required="" autocomplete="off"></div><div class="col-md-3 col-sm-6 isNoFloat"><label>'+from_date_lbl+'</label><input type="text" name="from_date[]" placeholder="'+select_lbl+'" class="career_page_experience_datepicker" required="" autocomplete="off"></div><div class="col-md-3 col-sm-6 isNoFloat"><label>'+to_date_lbl+'</label><input type="text" name="to_date[]" placeholder="'+select_lbl+'" class="career_page_experience_datepicker" required="" autocomplete="off"></div>';$(".append_here").append(r),init_career_page_experience_datepicker()}}function init_career_page_experience_datepicker(){$(".career_page_experience_datepicker").datepicker({dateFormat:"dd/mm/yy",changeMonth:!0,changeYear:!0,minDate:new Date(1970,6,12),maxDate:new Date(current_year,current_month-1,current_date-1),yearRange:"c-70:+0"}),"arb"==lang?$(".career_page_experience_datepicker").datepicker("option",$.datepicker.regional.ar):$(".career_page_experience_datepicker").datepicker("option",$.datepicker.regional["en-GB"])}function delete_account(e){confirm("Are you sure you want to delete your account at KEY?")&&($(".loaderSpiner").show(),$.ajax({type:"GET",url:base_url+"/services/mark_account_as_deleted?k=ItykVex546VBeiXabxlExlyzErtc313&lang="+lang+"&id_number="+e,data:{lang:lang},async:!1,dataType:"JSON",success:function(e){alert(e.message),1==e.status?window.location.href=lang_base_url+"/logout":$(".loaderSpiner").hide()}}))}function setCookie(e,t,a){var o="";if(a){var i=new Date;i.setTime(i.getTime()+24*a*60*60*1e3),o="; expires="+i.toUTCString()}document.cookie=e+"="+(t||"")+o+"; path=/"}function getCookie(e){for(var t=e+"=",a=document.cookie.split(";"),o=0;o<a.length;o++){for(var i=a[o];" "==i.charAt(0);)i=i.substring(1,i.length);if(0==i.indexOf(t))return i.substring(t.length,i.length)}return null}function eraseCookie(e){document.cookie=e+"=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;"}$rangeInput.on("input",(function(){sheet.textContent=getTrackStyle(this)})),$(".range-labels li").on("click",(function(){var e=$(this).index(),t=$(this).text();$("#fuelTankIn").val(t),$rangeInput.val(e+1).trigger("input")})),$((function(){$("#fuel_tank").slider({range:"min",value:$("#fuelTankIn").val(),min:0,max:8,slide:function(e,t){$("#fuelTankIn").val(t.value)}}),$("#fuelTankIn").val($("#fuel_tank").slider("value"))})),$((function(){$.widget("custom.combobox",{_create:function(){this.wrapper=$("<span>").addClass("custom-combobox").insertAfter(this.element),this.element.hide(),this._createAutocomplete(),this._createShowAllButton()},_createAutocomplete:function(){var e=this.element.children(":selected"),t=e.val()?e.text():"";this.input=$("<input>").appendTo(this.wrapper).val(t).attr("title","").addClass("custom-combobox-input ui-widget ui-widget-content ui-state-default ui-corner-left").autocomplete({delay:0,minLength:0,source:$.proxy(this,"_source")}).tooltip({classes:{"ui-tooltip":"ui-state-highlight"}}),this._on(this.input,{autocompleteselect:function(e,t){t.item.option.selected=!0,this._trigger("select",e,{item:t.item.option})},autocompletechange:"_removeIfInvalid"})},_createShowAllButton:function(){var e=this.input,t=!1;$("<a>").attr("tabIndex",-1).appendTo(this.wrapper).button({icons:{primary:"ui-icon-triangle-1-s"},text:!1}).removeClass("ui-corner-all").addClass("custom-combobox-toggle ui-corner-right").on("mousedown",(function(){t=e.autocomplete("widget").is(":visible")})).on("click",(function(){e.trigger("focus"),t||e.autocomplete("search","")}))},_source:function(e,t){var a=new RegExp($.ui.autocomplete.escapeRegex(e.term),"i");t(this.element.children("option").map((function(){var t=$(this).text();if(this.value&&(!e.term||a.test(t)))return{label:t,value:t,option:this}})))},_removeIfInvalid:function(e,t){if(!t.item){var a=this.input.val(),o=a.toLowerCase(),i=!1;this.element.children("option").each((function(){if($(this).text().toLowerCase()===o)return this.selected=i=!0,!1})),i||(this.input.val("").attr("title",a+" didn't match any item").tooltip("open"),this.element.val(""),this._delay((function(){this.input.tooltip("close").attr("title","")}),2500),this.input.autocomplete("instance").term="")}},_destroy:function(){this.wrapper.remove(),this.element.show()}}),$("#toggle").on("click",(function(){$(".combobox").toggle()})),$(document).ready((function(){$("#corporate_company_id").select2()}))})),$(document).on("click",'input[name="payment_method"]',(function(){var e=$(this).data("is-mada");$("#isMada").val(e)})),$(document).ready((function(){$("input[name='payment_method']").length&&$("input[name='payment_method']:first").click()})),$(".refundForm").submit((function(e){e.preventDefault(),$(".loaderSpiner").show();var t=$(this).attr("action");$.ajax({type:"POST",dataType:"json",data:new FormData(this),url:t,cache:!1,contentType:!1,processData:!1,success:function(e){$(".loaderSpiner").hide(),grecaptcha.reset();var t="eng"==lang?"Error":"خطأ";1==e.status&&(t="eng"==lang?"Success":"بنجاح",$(".refundForm")[0].reset()),$(".responseTitle").html(t),$(".responseMsg").html(e.message),$("#openMsgPopupNoRedirect").click()}})})),$(".fixIBANText").on("keydown keyup change",(function(){"SA"!==$(this).val().substring(0,2)&&$(this).val("SA")})),$(document).on("click",'input[name="do_you_have_experience"]',(function(){1==$(this).val()?$(".append_here").show():$(".append_here").hide()})),init_career_page_experience_datepicker(),$(document).on("click",".subscription_options button",(function(){eraseCookie("scroll_to_section_for_car");var e=$(this).data("subscribe_for_months"),t=$(this).data("car_id");$('#subscribe_for_months option[value="'+e+'"]').attr("selected","selected"),$("input#subscribe_for_months").val(e),$(".loaderSpiner").show(),setCookie("scroll_to_section_for_car",t,1),setTimeout((function(){$(".serFormArea").submit()}),1e3)})),$(document).ready((function(){var e=getCookie("scroll_to_section_for_car");e&&$("#section_for_car_"+e).length&&($("html, body").animate({scrollTop:$("#section_for_car_"+e).offset().top},1e3),setTimeout((function(){eraseCookie("scroll_to_section_for_car")}),5e3))})),$(document).on("click",'input[name="show_available_cars_only"]',(function(){$(".loaderSpiner").show(),$(this).is(":checked")?$(".sold_out").hide():$(".sold_out").show(),setTimeout((function(){$(".loaderSpiner").hide()}),500)})),$(document).on("click",".loyalty_programs_divs",(function(){$(".loyalty_programs_divs").removeClass("active"),$(this).addClass("active")})),$(document).on("click",".payment_options_divs",(function(){$(".payment_options_divs").removeClass("active"),$(this).addClass("active")}));var my_invoices_paginate=2;function show_benefits(e){$("#cards-section table tr th").removeClass("highlight-first"),$("#cards-section table tr td").removeClass("highlight"),$("#cards-section table tr td").removeClass("highlight-last"),setTimeout((function(){$("html, body").animate({scrollTop:$("#cards-section").offset().top},1e3),$("."+e+"_1").addClass("highlight-first"),$("."+e+"_2").addClass("highlight"),$("."+e+"_3").addClass("highlight"),$("."+e+"_4").addClass("highlight"),$("."+e+"_5").addClass("highlight"),$("."+e+"_6").addClass("highlight"),$("."+e+"_7").addClass("highlight"),$("."+e+"_8").addClass("highlight-last")}),100)}$(document).on("click",".my_invoices_paginate",(function(){var e=$(this).data("user_id");$.ajax({type:"GET",url:lang_base_url+"/my-invoices-paginate",data:{user_id:e,page:my_invoices_paginate},dataType:"JSON",beforeSend:function(){$(".loaderSpiner").show()},complete:function(){$(".loaderSpiner").hide()},success:function(e){$("#corp-invoices").find("tbody").append(e.html),!1===e.show_load_more_btn&&$(".load-more-btn").hide(),my_invoices_paginate++}})}));var btn=$("#loyalty-back-to-top-button");$(window).scroll((function(){$(window).scrollTop()>300?btn.addClass("show"):btn.removeClass("show")})),btn.on("click",(function(e){e.preventDefault(),$("html, body").animate({scrollTop:0},"300")}));